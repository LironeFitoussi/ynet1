(function () {
    var multiarticlesNamesObj = {
        "אוכל": "Food",
        "אורות": "Orut",
        "אסטרולוגיה": "Astrology",
        "בלייזר": "Blazer",
        "בריאות וכושר": "Briut",
        "דיגיטל": "Digital",
        "הורים": "Horim",
        "הכי חם": "Very Hot",
        "התחדשות עירונית": "Urban Renewal",
        "וידאו": "Video",
        "ועידות 2021": "Veidot",
        "חדשות": "News",
        "חודש היכרות חינם": "Free Introduction Month",
        "חופש": "Hofesh",
        "יהדות": "Yhadut",
        "יחסים": "Yhasim",
        "ירוק": "Yarok",
        "כלכלה וצרכנות": "Calcala",
        "לאישה": "Laisha",
        "מעורבות": "Involvement",
        'נדל"ן': "Nadlan",
        "סביבה ומדע": "Environment",
        "ספורט": "Sport",
        "עוד בחדשות": "News Extra",
        "עיצוב ואדריכלות": "Itzuv",
        "ערוץ 20": "Channel 20",
        "פסק דין": "Psak Din",
        "פרוגי": "Frogi",
        "צרכנות": "Consumer",
       "רכב": "Cars",
        "Pplus רכילות": "Pplus Gossip",
        "שווה קריאה": "Worth Reading",
        "תרבות ובידור": "Tarbut",
        "Xnet": "xnet",
        "הטבות למנוי ידיעות אחרונות": "Atavot",
        "פרויקטים מיוחדים": "special projects"
    }

    var tabComponentName = ["MultiArticleComponenta", "MultiImagesComponenta", "MultiImages1280Componenta", "MultiArticleTopComponenta1280", "MultiArticleComponenta1280",
      "MultiArticleRowsManualComponenta", "MultiYplusComponenta", "MultiArticleImagesComponenta1280"]

    tabComponentName.forEach(function (componentName) {
        getTagElements(componentName)
    })

    function getTagElements(componentName) {
        var containers = document.querySelectorAll("." + componentName)
        if (!containers) {
            return null
        }
        containers.forEach(function (elementContainer, index) {
            var innerText = elementContainer.querySelector(".rightTitleText") && elementContainer.querySelector(".rightTitleText").innerText;
            if (multiarticlesNamesObj[innerText]) {
                elementContainer.setAttribute('data-tb-region', multiarticlesNamesObj[innerText]);
                var containerSlots = elementContainer.querySelectorAll(`:scope .slotView`)
                containerSlots.forEach(function (slot, index) {
                    if (componentName === "multi-article-images-double-tab" && index > 2) {
                        return null;
                    }
					if (!slot.classList.contains("dfpId")){
						slot.setAttribute('data-tb-region-item', '')
					}
                })
            }
        })
    }

    const videoGalleryComps = ["VideoGalleryComponenta"]

    videoGalleryComps.forEach(function (componentName) {
        getVideoGalleryElements(componentName)
    })

    function getVideoGalleryElements(componentName) {
        var containers = document.querySelectorAll("." + componentName)
        if (!containers) {
            return null
        }
        containers.forEach(function (elementContainer, index) {
            var innerText = elementContainer.querySelector(".VideoGalleryTab") && elementContainer.querySelector(".VideoGalleryTab").innerText;
            if (multiarticlesNamesObj[innerText]) {
                elementContainer.setAttribute('data-tb-region', multiarticlesNamesObj[innerText]);
                var containerSlots = elementContainer.querySelectorAll(`:scope .videoItem`)
                containerSlots.forEach(function (slot, index) {
                    if (componentName === "multi-article-images-double-tab" && index > 2) {
                        return null;
                    }
                    slot.setAttribute('data-tb-region-item', '')
                })
            }
        })
    }

    var topStoryTypes = ['TopStoryWideComponenta', 'TopStoryComponenta', 'TopStoryWarComponenta', 'TopStory1280Componenta']

    topStoryTypes.forEach(function (type) {
        var topStory = document.querySelector("." + type)
        if (topStory) {
            topStory.setAttribute('data-tb-region', 'Top story');
            topStory.querySelector(".slotView").setAttribute('data-tb-region-item', '');
        }
    })

    var elements = [
        { containerClass: ".YnetMultiStripComponenta", slotClass: ".slotView", regionName: "strip" },
    ]

    elements.forEach(function (item) { setRegions(item.containerClass, item.slotClass, item.regionName) })

    function setRegions(containerClass, slotClass, regionName) {
        var containers = document.querySelectorAll(containerClass)
        if (!containers) {
            return null
        }
        containers.forEach(function (elementContainer, index) {
            elementContainer.setAttribute('data-tb-region', regionName + ' ' + index);
            var containerSlots = elementContainer.querySelectorAll(`:scope ${slotClass}`)
            containerSlots.forEach(function (slot) {
                slot.setAttribute('data-tb-region-item', '')
            })
        })
    }

     //for the first strip without tag title
     var firstStrip = document.querySelector(".YnetMultiStripRowsComponenta")
     if(firstStrip){
         firstStrip.setAttribute('data-tb-region', 'Strips');
         var containerSlots = firstStrip.querySelectorAll(`:scope .slotView`)
         containerSlots.forEach(function (slot, index) {
             if (slot.querySelector('iframe') || slot.classList.contains('advertesing')) {
                 return null;
             }
             slot.setAttribute('data-tb-region-item', '')
         })
     }

})();

window._newsroom = window._newsroom || [];
window._newsroom.push({ pageTemplate: 'Homepage - Desktop' });
window._newsroom.push({ pageDashboard: 'Homepage - Desktop' });
window._newsroom.push('auditClicks');
window._newsroom.push('trackPage');
