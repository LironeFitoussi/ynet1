"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var _min=("undefined"!=typeof __min?__min:null)||_min||{};_min=function(e){function t(e,t,r){function n(e,t){var r=null;switch(t=i(e,t),e){case o.Emitter.NEW_VIDEO_EVENT:r=g();break;case o.Emitter.NEW_SCRAPE_EVENT:r=h();break;case o.Emitter.CLICK:case o.Emitter.VIEWPORT:r=d();break;case o.Emitter.URL_REPORT:case o.Emitter.DAILY_USER:r=p();break;case o.Emitter.VIDEO_VIEWS:r=c();break;case o.Emitter.CUSTOM_EVENTS:r=u();break;case o.Emitter.CROWD_SOURCE:r=l()}r.push(e,t)}function i(t,r){switch(t){case o.Emitter.VIDEO_VIEWS:r.hadImpressionSession=e.parseBool(r.hadImpressionSession),r.hadImpressionSession?visibilityAnalyticsService.setHadImpressionSession():r.hadImpressionSession=visibilityAnalyticsService.hadImpressionSession()}return r}function a(){for(var e=0;e<s.length;e++)s[e].flush()}var s=[],l=function(){var n=new v(e,t,r.UrlReporter,(!0));return n.setMasQueueLength(1),n.init(),s.push(n),function(){return n}}(),c=function(){var n=new v(e,t,r.UrlReporter,(!0));return n.init(),s.push(n),function(){return n}}(),u=function(){var n=new v(e,t,r.UrlReporter,(!0));return n.init(),s.push(n),function(){return n}}(),d=function(){var n=new v(e,t,r.UrlReporter,(!0));return n.enableStorage("_minEE1"),n.init(),s.push(n),function(){return n}}(),p=function(){var n=new v(e,t,r.UrlReporter,(!0));return n.init(),s.push(n),function(){return n}}(),g=function(){var n=new v(e,t,r.VideoData,(!1),o.ReportMethods.GET);return n.init(),s.push(n),function(){return n.setValidator(e.validateScraperURL),n}}(),h=function(){var n=new v(e,t,r.UrlReporter,(!1));return n.init(),s.push(n),function(){return n}}();return{getVideoViewsReporter:c,getCounterServerReporter:d,getPlayerContent:g,getPlayerContentDelayed:h,send:n,flushAll:a}}function r(e,t,r){var n=r;if(""!==n){e[f.QUERY_PARAMS_SOURCE]+=n+" ",0===n.indexOf(t)&&(n=n.slice(1));for(var i,o,a=n.split("&"),s=/^qadt([\d\w]+)$/,l=0;l<a.length;l++)i=a[l].split("="),o=i[0],s.test(o)&&(o=o.replace(s,"$1"),e[o]=i[1])}}function n(){function e(){setInterval(function(){d.dispatchEvent(o.Events.ONE_SECONDS_INTERVAL,{interval:1e3}),location.href!=t&&(t=location.href,d.dispatchEvent(o.Events.URL_MANIPULATION_INTERVAL_SERVICE,{interval:1e3}))},1e3),setInterval(function(){d.dispatchEvent(o.Events.THREE_SECONDS_INTERVAL)},3e3)}var t=location.href;return{init:e}}if(_min.debug)window._minAlreadyLoaded=!1;else{if(window._minAlreadyLoaded)return void console.warn("Minute.ly already loaded");window._minAlreadyLoaded=!0}!function(){function t(e,t){var n=r();if(n){var i="POST";n.open(i,e,!0),n.setRequestHeader("User-Agent","XMLHTTP/1.0"),t&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),4!=n.readyState&&n.send(t)}}function r(){for(var e=!1,t=0;t<u.length;t++){try{e=u[t]()}catch(r){continue}break}return e}function n(){for(var e={},t=0;t<arguments.length;t+=1)for(var r=arguments[t],n=Object.keys(r),i=0;i<n.length;i+=1)e[n[i]]=r[n[i]];return e}function i(e){var t=/(mi-[\d|scraper-\d.]*\.js)/m,r=e&&e.stack,n=e&&e.message;if(r&&t.test(r)){var i={message:n,stack:JSON.stringify(r)};a(i)}}function o(){return{ver:c.flavor.file.replace(/[^\d.]/g,"").slice(0,-1),env:"production",publisher_id:c._publisher,source:_min.compatibility.isDeviceMobile()?2:1,user_id:c.sessionData.uid,session_id:c.sessionData.sessionId,url:window.self===window.top?window.location.href:document.referrer,level:"error",category:"general"}}function a(e){"string"==typeof e&&(e={message:e}),e.level="error";var t=n(o(),e);s(JSON.stringify(t))}function s(e){l("//errors.tldw.me/",e)}function l(e,r){navigator.sendBeacon?navigator.sendBeacon(e+"_.gif",r):t(e+"_.gif",r)}var c=JSON.parse(JSON.stringify(e)),u=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];window.addEventListener("error",function(e){i(e.error)}),window.addEventListener("unhandledrejection",function(e){i(e.reason)})}();var i=function(){function e(e){return Array.prototype.slice.call(e)}var t=function(){this.listeners=Object.create(null)};return t.prototype.addEventListener=function(t,r,n){var i=e(arguments);i=i.length>3?i.slice(3):[],this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({context:n,callback:r,isOnce:!1,args:i})},t.prototype.addEventListenerOnce=function(t,r,n){var i=e(arguments);i=i.length>3?i.slice(3):[],this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({context:n,callback:r,isOnce:!0,args:i})},t.prototype.removeEventListener=function(e,t,r){if(this.listeners[e]){for(var n=this.listeners[e].length,i=[],o=0;o<n;o++){var a=this.listeners[e][o];a.context===r&&a.callback===t||i.push(a)}this.listeners[e]=i}},t.prototype.removeAllEventListener=function(){this.listeners={}},t.prototype.dispatchEvent=function(e,t){var r={type:e,data:t},n=Array.prototype.slice.call(arguments,2);n.unshift(r);var i=this.listeners[e],o=0;if(i)for(var a=i.length-1;a>=0;a--){var s=i[a];if(s&&s.callback){var l=n.concat(s.args);setTimeout(s.callback.apply(s.context,l),1),o++,s.isOnce&&i.splice(a,1)}}return o},t}(),o={};o.Urls=function(){var e="https:"==window.location.protocol?1:0;return{ServerData:["http://data.minute.ly/","https://z2d7c5q4.ssl.hwcdn.net/"][e],ServerAnalytics:["http://data.minute.ly/","https://z2d7c5q4.ssl.hwcdn.net/"][e],UrlReporter:["http://counter.snackly.co/","https://counter.snackly.co/"][e],VideoData:["http://vdata.minute.ly/","https://b3g8i8r3.ssl.hwcdn.net/"][e],Configuration:["http://apv.configuration.minute.ly/","https://r7c2k6b3.ssl.hwcdn.net/"][e],Logger:["http://logger.snackly.co/","https://logger.snackly.co/"][e],Error:["http://errors.snackly.co/","https://errors.snackly.co/"][e]}}(),o.styles={},o.styles.OBJECT_FIT="object-fit",o.values={},o.values.RELATIVE="relative",o.values.ABSOLUTE="absolute",o.values.HIDDEN="hidden",o.values.COVER="cover",o.values.NONE="none",o.values.BLOCK="block",o.values.HUNDRED_PERCENT="100%",o.APVStates={Disposed:"disposed",New:"new",Blocked:"blocked",Disabled:"disabled",Active:"active"},o.config={},o.config.WindowIntervals={SCROLL:"scroll",RESIZE:"resize",URL:"url",ECHO_TIME:"echoTime",ECHO_REPEAT:"echoRepeat"},o.FLUSH_ANALYTICS=5e3,o.WindowKeys={COMPATIBILITY:"compatibility"},o.Events={WINDOW_DISPOSE:"windowDispose",TEST_MODE_READY:"testModeReady",WINDOW_SERVICE_READY:"windowServiceReady",POST_MESSAGE_RESPONSE:"postMessageResponse",VIDEOS_UPDATE:"videosUpdate",APV_DISPOSED:"apvDisposed",PLAYER_VIDEO_VIEW_CLICK:"playerVideoViewClick",APV_LOGO_CLICK:"apvLogoClick",PLAYER_FOUND:"playerFound",PLAYER_PLACEHOLDER_FOUND:"playerPlaceholderFound",PLAYER_PLAYING:"playerPlaying",PLAYER_VIDEO_CHANGED:"playerVideoChanged",IMPRESSION:"impressionAnalytics",CLIENT_INIT_ANALYTICS:"clientInitAnalyticsEvent",DAILY_USER:"dailyUserCreated",FIRST_VIDEO_VIEW:"firstVideoView",SYSTEM_RUNNING:"systemRunning",NEW_VIDEO_DATE:"newVideoData",LOAD_MORE_FOUND:"loadmorefound",AUXCLICK_EVENT:"auxclick",MESSAGE_EVENT:"message",FORCE_FIND_ELMS:"forceFindElements",INARTICLE_CLICK:"inArticleClick",MOUSE_UP:"mouseup",REGULAR_CLICK:"regularClick",CONFIG_READY:"configReady",CLICK_FROM_POINT:"clickFromPoint",URL_MANIPULATION_INTERVAL_SERVICE:"URLManipulationIntervalService",ONE_SECONDS_INTERVAL:"ONE_SECOND",THREE_SECONDS_INTERVAL:"THREE_SECONDS",IN_ARTICLE_PLACER_DISPOSED:"IN_ARTICLE_PLACER_DISPOSED"},o.playmode={VIEWPORT:"viewport",HOVER:"hover",BLOCKINGHOVER:"blockinghover"},o.Events.Element={VISIBLE:"elmVisible",NON_VISIBLE:"elmNonVisible",ANALYTICS_VISIBLE:"elmVisibleAnalytics",CLICK:"elmClick",CONTEXT_MENU_OPEN:"elmContextMenuOpen",CONTEXT_MENU_CLOSE:"elmContextMenuClose",MUTANT:"elmMutant",MOUSE_ENTER:"mouseenter",FIRST_MOUSE_ENTER:"firstmouseenter",MOUSE_LEAVE:"mouseleave",READY:"ready",UPDATE_CAROUSEL_ELEMENT:"updateCarouselContainer"},o.Events.Players={PLAYING:"playing",PAUSED:"paused",LOADED:"loaded",ENDED:"ended",ERROR:"error",AD_EVENT:"adEvent"},o.Events.DomWindow={SCROLL:"scroll",FOCUS:"focus",SAFARI_FOCUS:"safariFocus",BLUR:"blur",RESIZE:"resize",CLICK:"click",VISIBILITY_CHANGE:"visibilitychange",ORIENTATION_CHANGE:"orientationchange"},o.UrlStructure={Origin:"origin",PathName:"pathname",Search:"search",Hash:"hash"},o.NEW_VIDEO_SOURCE={MINUTE_SNIPPET:0},o.Emitter={NEW_VIDEO_EVENT:2,VIDEO_VIEWS:42,CLICK:94,DAILY_USER:93,VIEWPORT:95,NEW_SCRAPE_EVENT:97,URL_REPORT:98,CUSTOM_EVENTS:"custom_analytic",CROWD_SOURCE:"crowd_source",CONTEXT_MENU_OPEN_EVENT:4,ANALYTICS_CLICK_EVENT:0,ANALYTICS_IMPRESSION_EVENT:1,ANALYTICS_BLOCKING_DISTANCE_POTENTIAL:2,ANALYTICS_SOURCE_WEB_VIEW_GENERAL:12,ANALYTICS_SOURCE_WEB_VIEW_ANDROID:10,ANALYTICS_SOURCE_WEB_VIEW_IOS:11,ANALYTICS_SOURCE_WEB_MOBILE:2,ANALYTICS_SOURCE_WEB_DESKTOP:1,PRODUCT_APV:0,PRODUCT_IN_ARTICLE:1,CLICK_TYPE_NONE:"n",CLICK_TYPE_CLICK:"c",MINUTE_VIEWPORT_EVENT:"minute_impression"},o.Placements={VIEWPORT_IMPRESSION:1,HOVER_IMPRESSION:2},o.ReportMethods={GIF:"gif",GET:"get",POST:"post"},o.OriginalSrc={PATH:"path",ATTR:"attr"},o.integrationDataSet={ENABLE:"data-min-enable",ANCHOR:"data-min-anchor",PREVIEW:"data-min-preview",SIZE:"data-min-size",VIEWPORT_MASK:"data-min-mask",VIEWPORT_OBSERVER:"data-min-observer",METHOD:"data-min-method",SOURCE_MOBILE:"mobile",SOURCE_DESKTOP:"desktop"},o.integrationDataSetElm={METHOD:"minMethod"},o.sizeSelector={CONTAINER:"CONTAINER"},e.debug?o.Events.MINUTE_READY="minuteReady_debug":o.Events.MINUTE_READY="minuteReady",o.logoPositions={"top-left":{left:0,top:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"top-right":{right:0,top:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"bottom-left":{left:0,bottom:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"bottom-right":{right:0,bottom:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"}},o.StorageKeys={DailyUser:"DailyUser",HadImp:"HadImp",TestMode:"TestMode",Analytics:"Analytics",FromCamp:"FromCamp",ViewedHlts:"ViewedHlts"},o.SESSION_TTL=18e5,o.USER_TTL=2592e6,o.minuteClasses={},o.minuteClasses.CONTAINER="minute-container",o.WELCOME_TO_MINUTE_SIZE={SMALL:"small",BIG:"big",OFF:"off"},e=e,e.ver="1.17.0.38",e._publisher=e._publisher||"",e._publisherDebugUrl=e._publisherDebugUrl||"";var a={};a.publisher={},a.publisher.utils=a.publisher.utils||{};var s={};s.getDateNow=function(){return new Date},s.getTimeNow=function(){return s.getDateNow().getTime()};var l="production",c=s.getTimeNow(),u=window.performance?window.performance.timing.navigationStart:c,d=new i,p=(function(){var e=!1;return d.addEventListenerOnce(o.Events.SYSTEM_RUNNING,function(){e=!0}),function(){return e}}(),"/");"/"==p&&(p=location.hostname),function(){try{return Array.prototype.slice.call([1]),void(s.cloneArray=function(e){return Array.prototype.slice.call(e)})}catch(e){}var t=[];s.cloneArray=function(e){return t.slice.call(e)}}(),s.cloneObject=function(e){var t={};for(var r in e)if(s.isArray(e[r]))t[r]=s.cloneArray(e[r]);else if(null!==e[r])switch(typeof e[r]){case"boolean":case"number":case"string":case"undefined":t[r]=e[r];break;case"object":t[r]=s.cloneObject(e[r])}else t[r]=null;return t},s.extentObject=function(e,t){for(var r in e)if(null!==e[r]&&void 0!==e[r]||null===t[r])if(s.isArray(e[r]))t[r]=s.cloneArray(e[r]);else if(void 0!==t[r])switch(typeof e[r]){case"boolean":case"number":case"string":t[r]=e[r];break;case"object":t[r]=s.extentObject(e[r],t[r])}else t[r]=e[r];return t},s.isArray=function(e){return Array.isArray(e)},a.utils=a.utils||{},a.utils.Signal=function(){function e(e,t,r,n,i){this._listener=t,this._isOnce=r,this.context=n,this._signal=e,this._priority=i||0}function t(e,t){if("function"!=typeof e)return void s.logError("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function r(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){r.prototype.dispatch.apply(e,arguments)}}return e.prototype={active:!0,params:null,execute:function(e){var t,r;return this.active&&this._listener&&(r=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,r),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},r.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,r,n,i){var o,a=this._indexOfListener(t,n);if(a!==-1){if(o=this._bindings[a],o.isOnce()!==r)return void s.logError("You cannot add"+(r?"":"Once")+"() then add"+(r?"Once":"")+"() the same listener without removing the relationship first.")}else o=new e(this,t,r,n,i),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){var t=this._bindings.length;do--t;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var r,n=this._bindings.length;n--;)if(r=this._bindings[n],r._listener===e&&r.context===t)return n;return-1},has:function(e,t){return this._indexOfListener(e,t)!==-1},add:function(e,r,n){return t(e,"add"),this._registerListener(e,!1,r,n)},addOnce:function(e,r,n){return t(e,"addOnce"),this._registerListener(e,!0,r,n)},remove:function(e,r){t(e,"remove");var n=this._indexOfListener(e,r);return n!==-1&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,r=Array.prototype.slice.call(arguments),n=this._bindings.length;if(this.memorize&&(this._prevParams=r),n){t=this._bindings.slice(),this._shouldPropagate=!0;do n--;while(t[n]&&this._shouldPropagate&&t[n].execute(r)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},r}();var g=function(){function e(){return 0===o&&(o=i(c-u)),o}function t(){return 0===a&&(a=i(s.getTimeNow()-u)),a}function r(){return i(s.getTimeNow()-u)}function n(){return i(s.getTimeNow()-c)}function i(e){return 100*Math.floor(e/100)}var o=0,a=0;return{getScriptTime:e,getConfigTime:t,getTimeFromGenesis:r,getTimeFromMinuteGenesis:n}}(),h={HIGHLIGHT_APVS:"highlightAPV",ENABLE_DEBUG:"enableDebug",FORCE_TEST:"forceTest",FORCE_YOUTUBE_API:"forceYtApi",DISABLE_PROD:"disableProd",BYPASS_WINDOW_LOAD:"bypassWindowLoad",ACTIVE_ALL:"activeAll",PREVENT_PAGE_LOAD:"preventPageLoad",ENABLE_BLOCKING_DISTANCE:"enableBD",ENABLE_BLOCKING_DISTANCE_DEBUG:"enableBDDebug",MINUTE_UI_TEST:"uiTest",DEBUG_VISIBILITY:"debugVisibility",FORCE_ENABLE:"forceEnable",FORCE_CONTENT_CHANGED:"forceContentChanged"},f={QUERY_PARAMS_SOURCE:"queryParams",SCRIPT_HOSTNAME:"scriptHostname",IS_PROCUTION:"isProduction"};e.debugParams={},a.utils=a.utils||{},a.utils.Debounce=function(e,t,r){function n(e){E=e||h,g("enableFilter(time="+E+")")}function i(e,t){g("setEcho(time="+e+", repeat="+t+")"),P=e||h,S=t||S}function o(){g("start");var e=arguments.length>0?s.cloneArray(arguments):m;D(e),b(e)}function a(){g("stop"),u(),_=0}function l(){g("kill"),u(),f=null,v=null,m=null,T=!0}function c(){return y>0}function u(){g("_clear"),c()&&(clearTimeout(y),y=0)}function d(e){A=e}function p(){w=!0,g("debug")}function g(e){w&&s.log("Deboucer >> "+A+" >> "+e)}var h=e,f=t,v=r||null,m=s.cloneArray(arguments).slice(3),y=0,E=0,_=0,P=0,S=1,I=0,A="",w=!1,T=!1,D=function(e){if(g("_checkTimeFilter"),!(E<=0)){var t=s.getTimeNow();0===_&&(_=t);var r=t>_+E;if(r){if(g("****** callback by _checkTimeFilter!"),T)return;if(!f)return void s.log("Debounce is dead, and timer is running... exiting");f.apply(v,e),_=t}}},b=function(e){g("_startEcho");var t=s.cloneArray(e);u(),I=0,y=setTimeout(function r(){if(I+1===S&&(t=t.concat(!0)),g("****** callback by echo!"),!T){if(!f)return void s.log("Debounce is dead, and timer is running... exiting");f.apply(v,t),I++,I<S&&setTimeout(r,h),a()}},h)};return{enableFilter:n,setEcho:i,start:o,stop:a,kill:l,isRunning:c,setName:d,debug:p}},a.utils=a.utils||{},a.utils.Timer=function(e,t,r){function n(){if(0===_){var e=arguments.length>0?s.cloneArray(arguments):E;w(e)}}function o(e){S=e||0}function l(){I=0}function c(){A=null,f()}function u(){f(),m=null,y=null,E=null,A=null,P.removeAllEventListener()}function d(){return 0!==_}function p(){P.addEventListener.apply(P,s.cloneArray(arguments))}function g(){P.removeEventListener.apply(P,s.cloneArray(arguments))}function h(e){m&&m.apply(y,e),0===S||I<S?(I++,P.dispatchEvent(a.utils.Timer.Tick)):f()}function f(){_>0&&(clearInterval(_),_=0)}var v=e,m=t,y=r||null,E=s.cloneArray(arguments).slice(3),_=0,P=new i,S=0,I=0,A=null,w=function(e){A=e,f(),_=setInterval(function(){h(A)},v)};return{start:n,stop:c,kill:u,reset:l,isRunning:d,setCounterLimit:o,addEventListener:p,removeEventListener:g}},a.utils.Timer.Tick="timerTick",a.utils.Timer.start=function(e){var t=new a.utils.Timer(e);return t.start(),t};var v=function(t,r,n,i,a){function s(e){D=e,b=!!r}function l(e){i&&(e.session=N.getId(),e.user=N.getUserId()),e.url=e.url||t.urls.getCurrentCanonicalURL(),e.stor=!!r}function c(e){P=e}function u(r,n){if(w){if(t.isArray(n))for(var i=0;i<n.length;i++)l(n[i]);else l(n);var o={ver:e.ver,flavor:e.flavor.name,type:r,env:"production",payload:n};A&&(o.timestamp=t.getTimeNow()),b&&f(o),_.push(o),_.length>=P&&g()}}function p(){w=!1}function g(){if(document&&document.body){if(b&&(_=v(),_.length>0&&y([])),0===_.length||T&&!T())return void(_=[]);var e,r=_.slice();_=[];var n=!0;if("string"==typeof r&&""!==r?e=0===r.indexOf('"[{\\"')?JSON.parse(r):r:t.isArray(r)&&r.length>0?e=JSON.stringify(r):t.isArray(r)&&0===r.length?n=!1:(t.sendErrorReport("EmitterEventsCorrupt"),n=!1),!M.isDebug()&&n&&!M.isActiveAll()){var i="data="+encodeURIComponent(t.b64EncodeUnicode(e));t.sendReportByUrl(S,i,I)}t.log("Emitter Send: "+JSON.stringify(r)),t.log(r)}}function h(e){T=e}function f(e){var t=v();t.push(e),y(t)}function v(){C=!1;var e=JSON.parse(m(D)||"[]");return!e.length&&C&&t.logWarning("Another chrome tab or IFrame, sent your emitters! Try closing other chrome tabs."),C=!1,e}function m(e){if(!r)return null;try{return r.getItem(e)}catch(t){}return null}function y(e){e.length&&(C=!0),r&&r.setItem(D,JSON.stringify(e))}function E(){d.addEventListener(o.Events.THREE_SECONDS_INTERVAL,g,this)}var _=[],P=2,S=n||o.Urls.ServerData,I=a,A=t.parseBool(i,!0),w=!0,T=null,D=null,b=!1,C=!1;return{enableStorage:s,push:u,disable:p,flush:g,setValidator:h,init:E,setMasQueueLength:c}};!function(){a.reports={},a.reports.Levels={Debug:"debug",Info:"info",Warning:"warning",Error:"error"},s.sendReportByUrl=function(e,t,r){m.send(e,t,r)},s.sendLoggerReport=function(t){var r={ver:e.ver,env:l,publisher_id:e._publisher,source:L.getAnalyticsSource(),user_id:N.getUserId(),session_id:N.getId(),url:s.urls.getLocationUrl(),level:t.level||a.reports.Levels.Info,category:t.category||"general",message:"string"==typeof t?t:t.message};t.stack&&(r.stack=t.stack);var n=JSON.stringify(r);m.sendLog(n),s.log("Send report: "+n)},s.sendUserAgentLoggerReport=function(e){m.sendLog(e)},s.sendErrorReport=function(e){if(V.getIsEnableErrorReport()){var t={};"string"==typeof e?t.message=e||"empty":t.message=e.message||"empty",e.stack&&(t.stack=e.stack),t.level=a.reports.Levels.Error,s.sendLoggerReport(t)}}}(),function(){s.urls={},s.urls.removeTrailingSlash=function(e){return e&&e.length>0&&"/"==e.charAt(e.length-1)?e.substring(0,e.length-1):e},s.urls.getStructuredRawByUrl=function(){var e=document.createElement("a");return function(t,r){e.href=t;var n="",i=r||a.publisher&&a.publisher.utils&&a.publisher.utils.URL_STRUCT||[o.UrlStructure.Origin,o.UrlStructure.PathName];if(0===i.length)return t;for(var s=0;s<i.length;s++)n+=i[s]!==o.UrlStructure.Origin||e.origin?i[s]!==o.UrlStructure.PathName||"/"===e[i[s]].charAt(0)?e[i[s]]:"/"+e[i[s]]:window.location.origin;return n}}(),s.urls.defaultParser=function(e){if(e&&(0===e.indexOf("http")||0===e.indexOf("/"))){var t=s.urls.getStructuredRawByUrl(e,[o.UrlStructure.PathName]);return s.urls.removeTrailingSlash(t)}return null},s.urls.getCanonicalURL=function(e){for(var t,r,n=a.publisher.getParsers&&a.publisher.getParsers()||[s.urls.defaultParser],i=0;i<n.length&&(r=n[i],!(t=r(e)));i++);return t||e},s.urls.getCurrentCanonicalURL=function(){return s.urls.getCanonicalURL(s.urls.getLocationUrl())},s.urls.getRawByUrl=function(e){var t=document.createElement("a");return t.href=e,t.href},s.urls.parseQueryString=function(e){var t={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,r,n,i){t[r]=i}),t},s.urls.isUrlHomePage=function(){return"/"==location.pathname},s.urls.getLocationUrl=function(){return window.self===window.top?window.location.href:document.referrer},s.urls.getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=r.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}}(),function(){var e=document.createElement("iframe");e.style.display="none",e.setAttribute("class","clean-window-instance"),document.body.appendChild(e),s.cleanWindowInstance=e.contentWindow}(),function(){var t=function(){function t(e){g=e}function r(){for(var e=0,t=arguments.length;e<t;e++)if(s.isArray(arguments[e]))for(var n=0,t=arguments[e].length;n<t;n++)r(arguments[e][n]);else 500===h.length&&h.shift(),h.push(arguments[0])}function n(){if(r(arguments[0]),e.debug===!0){var t=g?" [Test Group]":"";if("string"==typeof arguments[0]&&(arguments[0]=t+" "+(s.getTimeNow()-u)+"ms >> "+arguments[0]),window.self!==window.top&&"string"==typeof arguments[0]){var n=arguments.length>1&&"string"==typeof arguments[1]&&0===arguments[1].indexOf("color:#");arguments[0]=(n?"":"%c ")+"IFrame "+f.id+t+": "+arguments[0];var i=n?arguments[1]:"color:#"+f.color+";",o="undefined"!=typeof arguments[1]&&"string"!=typeof arguments[1]?arguments[1]:"";s.consoleNative.log(arguments[0],i,o)}else s.consoleNative.log.apply(console,arguments)}}function o(){e.debug===!0&&s.consoleNative.log.apply(console,arguments)}function a(){var e=Array.prototype.slice.call(arguments),t=e.join(" ");t="%c  *** "+t;var r="color:#FFAD33;font-weight: bold;font-size:13px";s.log(t,r)}function l(){var e=Array.prototype.slice.call(arguments),t=e.join(" ");t="%c  *** "+t;var r="color:#FF0000;font-weight: bold;font-size:14px";s.log(t,r)}function c(e,t,r){p.addEventListener(e,t,r)}function d(){return h}var p=new i,g=null,h=[],f={id:Math.floor(1e3*Math.random()),color:function(){function e(){return Math.floor((Math.ceil(256*Math.random())+(/^((?!chrome|android|crios).)*(safari|iphone|ipad)/i.test(navigator.userAgent)?0:255))/2)}return e().toString(16)+e().toString(16)+e().toString(16)}()};return{log:n,logObject:o,logWarning:a,logError:l,setTestGroup:t,addEventListener:c,getBuffer:d}};a.utils=a.utils||{},a.utils.logger=new t,e.logger=a.utils.logger}(),s.log=a.utils.logger.log,s.logObject=a.utils.logger.logObject,s.logWarning=a.utils.logger.logWarning,s.logError=a.utils.logger.logError,s.setTestGroup=a.utils.logger.setTestGroup,s.consoleNative=s.cleanWindowInstance.console,function(){!function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))}()}(),s.globalTasks={},s.isDebugEnabled=function(){return s.debugParamsOverrides(),e.debug},s.isNative=function(e){return/\{\s*\[native code]\s*}/.test(""+e)},s.sendBeaconNative=function(){return navigator.sendBeacon||s.cleanWindowInstance.navigator.sendBeacon?s.isNative(navigator.sendBeacon)?navigator.sendBeacon:s.isNative(s.cleanWindowInstance.navigator.sendBeacon)?s.cleanWindowInstance.navigator.sendBeacon:null:null}(),s.generateUID=function(){function e(){return Math.floor((1+Math.random())*s.getTimeNow()).toString(16).substring(1)}return e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()},s.b64EncodeUnicode=function(e){function t(e){function t(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}var r,n,i,o,a,s,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",d=0;for(e=t(e);d<e.length;)r=e.charCodeAt(d++),n=e.charCodeAt(d++),i=e.charCodeAt(d++),o=r>>2,a=(3&r)<<4|n>>4,s=(15&n)<<2|i>>6,l=63&i,isNaN(n)?s=l=64:isNaN(i)&&(l=64),u=u+c.charAt(o)+c.charAt(a)+c.charAt(s)+c.charAt(l);return u}return(window.btoa||t)(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))},s.timeRounder=function(e){return Math.round(10*e)/10},s.getComputedStyle=function(e){return window.getComputedStyle(e)},s.extendObject=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e},s.setMediaElementSize=function(e,t,r){t=t||e.videoWidth||e.naturalWidth,r=r||e.videoHeight||e.naturalHeight,e.setAttribute("data-media_dimensions",t+","+r)},s.extractElementSize=function(e){var t=e.getBoundingClientRect(),r=parseFloat(t.width),n=parseFloat(t.height);return{width:r,height:n,error:""}},s.getMediaElementSize=function(e){var t=e.getAttribute("data-media_dimensions");return t?(t=t.split(","),t.length<0&&(t[0]*=1,t[1]*=1),t):null},s.ElementObjectFit=function(){function e(e){var t="0% 0%";e.style.transformOrigin=t,e.style.webkitTransformOrigin=t,e.style.msTransformOrigin=t,e.style.mozTransformOrigin=t,e.style.oTransformOrigin=t,e.style.maxWidth="none",e.style.maxHeight="none";var r=e.parentNode,n=e.style.borderRadius;0!=n&&(r.style.borderRadius=n,r.style.overflow="hidden")}function t(t,r){if(t.parentNode){var n=s.getMediaElementSize(t);if(n){var i,o=s.getComputedStyle(r);if(("100%"!==o.width||"100%"!==o.height)&&"auto"!==o.width&&"auto"!==o.height){var a,l=n[0],c=n[1],u=parseFloat(o.width),d=parseFloat(o.height),p=d/c;l*p<u&&(p=u/l),a=(l*p-u)/2,p=Math.ceil(10*p)/10,i="scale("+p+")",e(t),t.style.transform=i,t.style.msTransform=i,t.style.mozTransform=i,t.style.webkitTransform=i,t.style.oTransform=i,t.style.width="auto",t.style.height="auto";var g="rtl"===o.direction;g?t.style.right="-"+a+"px":t.style.left="-"+a+"px"}}}}function r(t){t.parentNode&&(e(t),t.style.width="100%",t.style.height="100%")}function n(e){if(!L.isObjectFitSupported()&&e.originalElement){var t=new MutationObserver(function(){i(e)});t.observe(e.originalElement,{attributes:!0}),i(e)}}function i(e){var n;return e.styleOverrides=e.styleOverrides||{},e.isFullSize=s.parseBool(e.isFullSize,!1),e.styleOverrides[a]?void t(e.mediaElement,e.originalElement,e.styleOverrides[a]):(n=e.styleOverrides[o]?e.styleOverrides[o]||e.mediaElement.style.objectFit:e.mediaElement.style.objectFit||"cover",void("cover"===n&&(e.isFullSize?r(e.mediaElement):t(e.mediaElement,e.originalElement))))}var o="object-fit",a="object-fit-polyfill";return{set:n}}(),s.isPromise=function(e){return!!e.then},s.appendDebugToolsQueryData=function(){var e=document.createElement("a");return function(t){var r=s.getAllDebugParamsString();return e.href=t,r&&(e.search+=(e.search?"&":"")+r),e.href}}(),s.getAllDebugParamsString=function(){for(var t=Object.keys(h),r="",n=0;n<t.length;n++){var i=t[n],o=e.debugParams[h[i]];o&&(r&&(r+="&"),r+="qadt"+h[i]+"="+o)}return r},s.debugParamsOverrides=function(t){if(t||!(Object.keys(e.debugParams).length>0)){var r=s.parseUrlDebugParams();e.debugParams=r,"undefined"!=typeof r[h.ENABLE_DEBUG]&&(e.debug="true"==r[h.ENABLE_DEBUG]),s.parseScriptDomain()}},s.parseUrlDebugParams=function(){var e=document.createElement("a"),t={};return e.href=s.urls.getLocationUrl(),t[f.QUERY_PARAMS_SOURCE]="",r(t,"?",e.search),r(t,"#",e.hash),t},s.parseScriptDomain=function(){var t="snippet.minute.ly",r="d2d4r7w8.map2.ssl.hwcdn.net",n=s.getScriptHostname();e.debugParams[f.IS_PROCUTION]=n===t||n===r,e.debugParams[f.IS_PROCUTION]&&(n=""),e.debugParams[f.SCRIPT_HOSTNAME]=n},s.getScriptHostname=function(){var e="";if(document.currentScript){var t=document.createElement("a");t.href=document.currentScript.src,e=t.hostname}return function(){return e}}(),s.validateScraperURL=function(){if(V.isScraperEnable())if(L.isIE()||L.isEdge())s.log("** Scraper disabled on IE and Edge. **");else{if(s.isCurrentUrlFilterValid(V.getFilterScraper()))return s.log("** Validate Scraper URL is OK! **"),!0;s.log("** Scraper blocked by Filter URL. **")}else s.log("** Scraper disabled by configuration for this source **");return R.getPlayerContentDelayed().disable(),!1},s.isPlacementEnabled=function(t){return"undefined"!=typeof e.debugParams[h.ACTIVE_ALL]||s.isCurrentUrlFilterValid(V.getFilterPlacements(t))},s.isCurrentUrlFilterValid=function(e){return s.isUrlFilterValid(s.urls.getLocationUrl(),e)},s.isUrlFilterValid=function(e,t){var r=!0;0===t.white.length||s.isUrlMatchPattern(e,t.white)||(r=!1);var n=!1;return s.isUrlMatchPattern(e,t.black)&&(n=!0),r&&!n},s.isUrlMatchPattern=function(e,t){for(var r,n=0;n<t.length;n++)if(r=new RegExp(t[n],"i"),null!==e.match(r))return!0;return!1},s["extends"]=function(e,t){e.__superCtor__=t,e.__super__=t.prototype,e.prototype=Object.create(t.prototype),e.prototype.constructor=e},s.getlistAsArray=function(e){return"string"!=typeof e?e||[]:""===e?[]:JSON.parse(e)},s.isElementHasSize=function(e){if(!e)return!1;var t=s.getComputedStyle(e),r=parseInt(t.width,10),n=parseInt(t.height,10);if(n>10&&r>10||"auto"===t.height&&"auto"===t.width)return!0;var i=e.getBoundingClientRect();return i.width>10&&i.height>10},s.parseBool=function(e,t){return"undefined"==typeof e&&"undefined"!=typeof t?t:"true"===e||e===!0},s.parsePercentValue=function(e){if(void 0===e||e===!1||"false"===e)return!1;if(e===!0||"true"===e)return!0;var t=parseInt(e,10),r=100*Math.random();return r>t},s.generateUnique=function(){return"xxxxxxxxxxxx-xxxx-4xxx-yxxxxxx-xxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)})},s.generateShortUnique=function(){return"mxxxxx".replace(/[x]/g,function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)})},s.getRequestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){
return setTimeout(e,1e3/60)};return e&&t(e),t},s.isMidnightPassed=function(e){function t(e){return new Date(e+r)}var r=6e4*s.getDateNow().getTimezoneOffset(),n=new Date(e).getTime(),i=s.getDateNow().getTime(),o=t(n),a=t(i),l=a.getYear(),c=o.getYear(),u=a.getMonth(),d=o.getMonth(),p=a.getDate(),g=o.getDate();return l<c||u<d||p<g},s.calcDateNextMidnightUTC=function(){var e=6e4*s.getDateNow().getTimezoneOffset(),t=s.getDateNow().getTime(),r=new Date(t+e);return r.setHours(0,0,0,0),r.setDate(r.getDate()+1),r.setTime(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0)),r},s.calcDatePlusMinutesUTC=function(e){var t=new Date;return t.setMinutes(t.getMinutes()+(e||5)),t},s.windowDispatchEvent=function(e){var t=null;try{t=new Event(e)}catch(r){t=document.createEvent("Event");var n=!1,i=!1;t.initEvent(e,n,i)}window.dispatchEvent(t)},s.isIFrame=function(){return window.self!==window.top},s.isInt=function(e){return e%1===0},s.isSupportIntersectionObserver=function(){var e=window.IntersectionObserver&&s.isNative(window.IntersectionObserver);return function(){return e}}(),s.getDayUTCCookie=function(e){e||(e=30);var t=new Date;return t.setTime(t.getTime()+24*e*60*60*1e3),t.toUTCString()},s.addWinEventListener=function(e,t,r,n){t.addEventListener?t.addEventListener(e,r.bind(n),!1):t.attachEvent&&t.attachEvent(e,r.bind(n))},s.removeWinEventListener=function(e,t,r,n){t.addEventListener?t.removeEventListener(e,r,!1):t.attachEvent&&t.detachEvent(e,r)},s.hasOwnProperty=Object.prototype.hasOwnProperty,s.isObjEmpty=function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(s.hasOwnProperty.call(e,t))return!1;return!0},s.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},s.includes=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},s.isJsonString=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},s.isDateString=function(e){try{new Date(e)}catch(t){return!1}return!0},s.getParamsFromUrl=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)"),n=r.exec(e);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},s.isValidURL=function(e){var t={valid:!0,obj:{}};try{t.obj=new URL(e)}catch(r){t.valid=!1}return t},function(){function e(e){function t(){return S}function r(){if(!h){var e=void 0;h=new s.cleanWindowInstance.XMLHttpRequest,v===c?f+="_.gif?"+E:(v=u,f+="_.gif",e=E);try{h.open(v,f,!0)}catch(t){return}m&&h.setRequestHeader(i,m),h.onload=n,h.onerror=g,h.ontimeout=p,h.timeout=y,h.send(e)}}function n(){h.status>=200&&h.status<300?_.dispatch():P.dispatch("XHR_Complete:"+h.status)}function p(){P.dispatch("timeout")}function g(){P.dispatch("error:"+h.status)}var h,f=e.url||"",v=e.method||c,m=v===c?o:l,y=e.timeout||5e3,E=e.data,_=new a.utils.Signal,P=new a.utils.Signal,S="XHR"+d++;return{getID:t,load:r,onComplete:_,onError:P,Methods:{GET:c,POST:u}}}function t(t,r){var n=new e(t),i=function(e){p[n.getID()]=void 0,n.onComplete.removeAll(),n.onError.removeAll(),r(e)};return p[n.getID()]=n,n.onComplete.addOnce(i),n.onError.addOnce(i),n.load(),n}function r(e,r){return e.method=c,t(e,r)}function n(e,r){return e.method=u,t(e,r)}var i="Content-Type",o="image/gif",l="application/text",c="get",u="post",d=0;a.utils=a.utils||{},a.utils.ajax=a.utils.ajax||{},a.utils.ajax.XHRRequest=e;var p={};a.utils.ajax.sendGetRequest=r,a.utils.ajax.sendPostRequest=n}();var m=function(){function e(e){r(o.Urls.Logger,e,o.ReportMethods.POST)}function t(e){r(o.Urls.Error,e,o.ReportMethods.POST)}function r(e,t,r){if(!r&&V)return void p(e+"_.gif?"+t);r=r||o.ReportMethods.POST;var l=a.utils.ajax;switch(r){case o.ReportMethods.GIF:i(e,t);break;case o.ReportMethods.GET:l.sendGetRequest({url:e,data:t},n);break;case o.ReportMethods.POST:s.sendBeaconNative?s.sendBeaconNative.call(navigator,e+"_.gif",t):l.sendPostRequest({url:e,data:t},n)}}function n(e){}function i(e,t){var r=new Image;r.onload=function(){l(this)},r.onerror=function(){s.sendErrorReport("EmitterErrorContent:NoTrace"),l(this)},r.src=e+"_.gif?"+t,document.body.appendChild(r)}function l(e){try{document.body.removeChild(e)}catch(t){}}function c(){var e=V.getItem(w);e=e?JSON.parse(e):[],M=e}function u(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push({owner:n.owner,url:n.url,state:n.state,time:n.time,retry:n.retry})}return t}function d(){clonedList=u(M),V.setItem(w,JSON.stringify(clonedList)),M=null}function p(e){var t={owner:U,url:e,image:null,state:T,time:0,retry:-1};c(),g(t),M.push(t),d()}function g(e){e.image=h(e),e.time=s.getTimeNow(),e.retry+=1,e.state=D,document.body.appendChild(e.image)}function h(e){var t=new Image;return t.onload=function(){f(e)},t.onerror=function(){v(e)},t.src=e.url,t}function f(e){c(),y(e),d()}function v(e){if(s.sendErrorReport("EmitterErrorContent:"+JSON.stringify(e)),e.retry===F)return c(),y(e),void d();var t=e.retry*R;setTimeout(function(){c(),m(e),d()},t)}function m(e){_(e),E(e),g(e),M.push(e)}function y(e){_(e),E(e)}function E(e){for(var t=-1,r=0;r<M.length;r++)e.url===M[r].url&&(t=r);t>-1&&M.splice(t,1)}function _(e){try{document.body.removeChild(e.image)}catch(t){}}function P(){c(),S(),d()}function S(){for(var e,t=0;t<M.length;t++)e=M[t],I(e)&&A(e)}function I(e){if(e.guid===U)return!0;var t=s.getTimeNow()-e.time;return t>L&&(e.guid=U,e.retry=-1,!0)}function A(e){var t=!1;switch(e.state){case T:case b:t=!0;break;case C:y(e);break;case D:var r=s.getTimeNow()-e.time;r>O&&(t=!0)}t&&m(e)}var w="_minRTrs",T=0,D=1,b=2,C=3,O=2e4,L=35e3,N=5e3,R=5e3,F=20,U=s.generateUnique(),V=null,M=null,k=null;return V&&(k=new a.utils.Timer(N,P),k.start()),{send:r,sendLog:e,sendError:t}}(),y=(function(){function e(e,t){var r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),o=n.right>r.right,a=n.left<r.left,s=n.top>=r.bottom,l=n.bottom<=r.top,c={state:i.FULLY_VISIBLE,percentage:1};return s||l?(c.percentage=0,c.state=i.HIDDEN,c):(a?c.percentage=(n.right-r.left)/n.width:o&&(c.percentage=(n.width-(n.right-r.right))/n.width),c.percentage>0&&c.percentage<1?c.state=i.ANALYTICS_VISIBLE:c.percentage<=0?c.state=i.HIDDEN:c.state=i.FULLY_VISIBLE,c.percentage=c.percentage<0?0:100*c.percentage,c)}function t(t,r){var n,a=100*o(t);if(n=0===a?i.HIDDEN:100===a?i.FULLY_VISIBLE:i.ANALYTICS_VISIBLE,r!==window&&n!==i.HIDDEN&&r){var s=e(t,r);return s.percentage<a?s:{state:n,percentage:a}}return{state:n,percentage:a}}function r(e,r){var n=t(e,r).state;return n!==i.HIDDEN}function n(e,r){return t(e,r).percentage}var i={HIDDEN:0,ANALYTICS_VISIBLE:1,FULLY_VISIBLE:2},o=function(){function e(e){return e&&1===e.nodeType||!1}function t(e){var t=e||window;return{height:t.innerHeight,width:t.innerWidth}}function r(e,t){return(t||window).getComputedStyle(e,null)}function n(e,t){return e.getPropertyValue(t)}function i(t,o){o||(o=r(t));var a=n(o,"display");if("none"===a)return!1;var s=t.parentNode;return!e(s)||i(s)}function o(e,t){if(e===(t||window).document)return!0;if(!e||!e.parentNode)return!1;var o=r(e,t),a=n(o,"visibility");return"hidden"!==a&&"collapse"!==a&&i(e,o)}function a(e,t){return!(!e||e.width<=0||e.height<=0)&&(e.bottom>0&&e.right>0&&e.top<t.height&&e.left<t.width)}return function(e,r){if(!e)return 0;var n={};try{n=e.getBoundingClientRect()}catch(i){return 0}var s=t(r);if(!a(n,s)||!o(e,r))return 0;var l=0,c=0;return n.top>=0?l=Math.min(n.height,s.height-n.top):n.bottom>0&&(l=Math.min(s.height,n.bottom)),n.left>=0?c=Math.min(n.width,s.width-n.left):n.right>0&&(c=Math.min(s.width,n.right)),l*c/(n.height*n.width)}}();return{isElementVisible:r,getViewportState:t,getElementVisiblePercents:n,state:i}}(),function(e){function t(e){return f[e]||p(e)}function r(e,t){"undefined"!=typeof e&&n(e,t)}function n(t,r){f[t]=r,"undefined"==typeof r&&(r=""),e.setItem(t,r)}function i(){d.addEventListener(o.Events.CLIENT_INIT_ANALYTICS,function(){u()}),window.addEventListener("click",function(){u()},!1),window.addEventListener(o.Events.AUXCLICK_EVENT,function(e){e.type===o.Events.AUXCLICK_EVENT&&e.button>=2||u()},!1),d.addEventListener(o.Events.IMPRESSION,function(){u()})}function a(e){i(),f=e}function s(){Object.keys(f).forEach(function(t){e.removeItem(t)}),f={}}function l(){return t(g)}function c(){return t(h)}function u(){Object.keys(f).forEach(function(e){var r=t(e);"undefined"==typeof r&&null!==r&&n(e,f[e])})}function p(t){return f[t]=e.getItem(t),f[t]}var g="sessionId",h="uid",f={};return{get:t,set:r,reset:s,init:a,getId:l,getUserId:c}}),E=(function(){function e(){var e=new Date(s.getTimeNow()+o.SESSION_TTL).toUTCString();return s.isMidnightPassed(e)&&(e=s.calcDateNextMidnightUTC()),e}function t(){return new Date(s.getTimeNow()+o.USER_TTL).toUTCString()}function r(e){for(var t in a)if(a.hasOwnProperty(t))for(var r=a[t].keys,n=0;n<r.length;n++)if(r[n]===e)return t;return null}function n(r){switch(r){case"session":return e();case"daily":return s.calcDateNextMidnightUTC();case"user":return t();default:return r}}var i=null,a={},l=function(e){function t(t,i){var o=r(t);if(!o)return void e.setItem(t,i);var s,l=a[o]||{},c=n(l.expiration);try{s=JSON.parse(e.getItem(o))}catch(u){s={}}s[t]=i,e.setItem(o,JSON.stringify(s),c)}function i(t){var n=r(t);if(!n)return e.getItem(t);var i=JSON.parse(e.getItem(n)||null)||{};return t in i?i[t]:null}function o(t){var n=r(t);if(!n)return void e.removeItem(t);var i=a[n]||{},o=i.expiration,l=JSON.parse(e.getItem(n)||null)||{};delete l[t],s.isEmpty(l)?e.removeItem(n):e.setItem(n,JSON.stringify(l),o)}function l(e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])}return{setItem:t,getItem:i,removeItem:o,setKeysTableConfig:l}};return{getInstance:function(e){if(!i){var t=e.getLocalStorageInstance();t?i=l(t):s.logWarning("No available cookie storage")}return i}}}(),function(){var e="minute",t=function(t){return e+t},r=function(){this.storage=n()},n=function(){return i(localStorage)?localStorage:i(sessionStorage)?sessionStorage:null},i=function(e){var t="test";try{return e.setItem(t,t),e.removeItem(t),!0}catch(r){return!1}};return r.prototype.getItem=function(e){var r=this.storage.getItem(t(e));return null!=r&&(r=JSON.parse(r)),r},r.prototype.setItem=function(e,r){return this.storage.setItem(t(e),JSON.stringify(r))},r.prototype.removeItem=function(e){return this.storage.removeItem(t(e))},r.prototype.getCurrentStorage=function(){return this.storage},r}()),_=function(e){function t(e){var t,n,i=e.compatibility;switch(typeof i){case"undefined":return;case"string":i=JSON.parse(i)}u.isDeviceMobile()?(t=i.mobile||{},n=i.os||{},r(p,n)):t=i.desktop||{},d=r(d,t)}function r(e,t){for(var r in t)e.hasOwnProperty(r)&&(e[r]=t[r]);return e}function n(e){t(e)}function i(){if(!d[u.browserName()])return!1;if(u.browserMajorVersion()<d[u.browserName()])return!1;if(u.isDeviceMobile()){var e=u.osVersion();if(u.isOSAndroid())return s(e,p.android)>=0;if(u.isOSiOS())return s(e,p.ios)>=0}return!0}function a(){return u.isDeviceDesktop()?o.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP:o.Emitter.ANALYTICS_SOURCE_WEB_MOBILE}function s(e,t){for(var r=0;r<3;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0}function l(){return!(u.isBrowserIE()||u.isBrowserEdge())}function c(){var e=window.navigator.userAgent.toLowerCase(),t=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e);return t}var u=e,d={firefox:48,msie:99,edge:14,chrome:53,safari:9,crios:99},p={android:[4,4,4],ios:[10,3,3]},g=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(r){}return e}();return{init:n,isBrowserSupported:i,isSafari:u.isBrowserSafari,isIE:u.isBrowserIE,isEdge:u.isBrowserEdge,isFF:u.isBrowserFirefox,isObjectFitSupported:l,isMobile:u.isDeviceMobile,isDesktop:u.isDeviceDesktop,isChrome:u.isBrowserChrome,isAndroid:u.isOSAndroid,isiPad:u.isDeviceIPad,isIosSafari:u.isBrowserSafari,getAnalyticsSource:a,isLPM:u.isLPM,isDataSaverOn:u.isDataSaverOn,isDeviceTablet:c,supportsPassive:g}},P=function(){function e(e){var t=null;return t=a.publisher.Compatibility?new a.publisher.Compatibility(e):new _(e)}return{create:e}},S=function(e,t){function r(e,r,l,p){pe=e.config,ge=e.system,pe=t.extentObject(he,pe),ye=l,fe=p,ve=r,Ee=r.isDesktop(),_e=r.isiPad(),n(),i(),a(),s(),c(),u(),d.dispatchEvent(o.Events.CONFIG_READY,this)}function n(){pe.general=pe.general||{},pe.general.testGroupSize=parseInt(pe.general.testGroupSize||"10"),pe.general.errorReport=t.parsePercentValue(pe.general.errorReport),pe.general.shareMinuteEvent=t.parseBool(pe.general.shareMinuteEvent,!1),pe.general.shouldWaitForLoadEvent=t.parseBool(pe.general.shouldWaitForLoadEvent,!1),pe.general.welcomeToMinuteSize=pe.general.welcomeToMinuteSize||o.WELCOME_TO_MINUTE_SIZE.BIG}function i(){pe.regularPlacer=pe.regularPlacer||{};var e=pe.regularPlacer.filter||{};e.mobile&&ve.isMobile()?e=pe.regularPlacer.filter.mobile:e.desktop&&Ee&&(e=pe.regularPlacer.filter.desktop),e.white=e.white||[],e.black=e.black||[],pe.regularPlacer.filter=e,pe.regularPlacer.blockingDistance=pe.regularPlacer.blockingDistance||{},pe.regularPlacer.blockingDistance.active=t.parseBool(pe.regularPlacer.blockingDistance.active,!0),pe.regularPlacer.blockingDistance.radius=parseInt(pe.regularPlacer.blockingDistance.radius||"600"),pe.regularPlacer.blockingDistance.staticBlockersSelector=pe.regularPlacer.blockingDistance.staticBlockersSelector||"emptyElement",pe.regularPlacer.blockingDistance.enableDupVidid=t.parseBool(pe.regularPlacer.blockingDistance.enableDupVidid,!1),pe.regularPlacer.validRatio=parseFloat(pe.regularPlacer.validRatio||.9),pe.regularPlacer.showLogo=t.parseBool(pe.regularPlacer.showLogo,!0),pe.regularPlacer.logoPosition=pe.regularPlacer.logoPosition||"top-right",pe.regularPlacer.clickByPoint=t.parseBool(pe.regularPlacer.clickByPoint,!1),pe.regularPlacer.applyZIndexReorder=t.parseBool(pe.regularPlacer.applyZIndexReorder,!0),pe.regularPlacer.renderModulus=parseInt(pe.regularPlacer.renderModulus||60),pe.regularPlacer.minimumWidth=parseInt(pe.regularPlacer.minimumWidth||100),pe.regularPlacer.minimumHeight=parseInt(pe.regularPlacer.minimumHeight||50),pe.regularPlacer.watchFull=pe.regularPlacer.watchFull||{},ve.isMobile()&&pe.regularPlacer.watchFull.mobile?pe.regularPlacer.watchFull=pe.regularPlacer.watchFull.mobile:Ee&&pe.regularPlacer.watchFull.desktop&&(pe.regularPlacer.watchFull=pe.regularPlacer.watchFull.desktop),pe.regularPlacer.watchFull.active=t.parseBool(pe.regularPlacer.watchFull.active,!1),pe.regularPlacer.watchFull.active&&(pe.regularPlacer.watchFull.minimumWidth=parseInt(pe.regularPlacer.watchFull.minimumWidth||500),pe.regularPlacer.watchFull.text=pe.regularPlacer.watchFull.text||"Watch Full Video",pe.regularPlacer.watchFull.position=pe.regularPlacer.watchFull.position||["bottom","left"]),ve.isiPad()||ve.isMobile()?pe.regularPlacer.playmode=o.playmode.VIEWPORT:pe.regularPlacer.playmode="hover"==pe.regularPlacer.playmode?o.playmode.HOVER:o.playmode.VIEWPORT,pe.regularPlacer.maxApvsPerPage=parseInt(pe.regularPlacer.maxApvsPerPage||999),pe.regularPlacer.noDuplicateVideos=t.parseBool(pe.regularPlacer.noDuplicateVideos,!1),pe.regularPlacer.trackSize=t.parseBool(pe.regularPlacer.trackSize,!0),pe.regularPlacer.disableParentTransfrom=t.parseBool(pe.regularPlacer.disableParentTransform,!1)}function a(){pe.inArticlePlacer=pe.inArticlePlacer||{},Ee&&pe.inArticlePlacer.desktop?pe.inArticlePlacer=pe.inArticlePlacer.desktop:!Ee&&pe.inArticlePlacer.mobile&&(pe.inArticlePlacer=pe.inArticlePlacer.mobile),pe.inArticlePlacer.active=t.parseBool(pe.inArticlePlacer.active,!1),pe.inArticlePlacer.showLogo=t.parseBool(pe.inArticlePlacer.showLogo,!0),pe.inArticlePlacer.logoPosition=pe.inArticlePlacer.logoPosition||"top-right",pe.inArticlePlacer.viewportMask=pe.inArticlePlacer.viewportMask||"emptySelector",pe.inArticlePlacer.filter=pe.inArticlePlacer.filter||{},pe.inArticlePlacer.filter.white=pe.inArticlePlacer.filter.white||[],pe.inArticlePlacer.filter.black=pe.inArticlePlacer.filter.black||[],pe.inArticlePlacer.watchFull=pe.inArticlePlacer.watchFull||{},pe.inArticlePlacer.watchFull.active=t.parseBool(pe.inArticlePlacer.watchFull.active,!1),pe.inArticlePlacer.watchFull.active&&(pe.inArticlePlacer.watchFull.minimumWidth=parseInt(pe.inArticlePlacer.watchFull.minimumWidth||500),pe.inArticlePlacer.watchFull.text=pe.inArticlePlacer.watchFull.text||"Watch Full Video",pe.inArticlePlacer.watchFull.position=pe.inArticlePlacer.watchFull.position||["bottom","left"])}function s(){pe.scraper=pe.scraper||{},pe.scraper.filter=pe.scraper.filter||{},pe.scraper.filter.white=pe.scraper.filter.white||[],pe.scraper.filter.black=pe.scraper.filter.black||[],pe.scraper.enableEventCollection=t.parseBool(pe.scraper.enableEventCollection,!1),pe.scraper.type2=t.parseBool(pe.scraper.type2,!1),pe.scraper.IAContainers=pe.scraper.IAContainers||"emptySelector",pe.scraper.featuredWrapper=pe.scraper.featuredWrapper||null,pe.scraper.autopush&&t.isArray(pe.scraper.autopush)?pe.scraper.autopush=pe.scraper.autopush:pe.scraper.autopush=[]}function l(){return document.querySelector(pe.inArticlePlacer.viewportMask)||window}function c(){ge.rezVideo||(ge.rezVideo={s:100,m:200,l:300})}function u(){pe.metadataEnhancer=pe.metadataEnhancer||{},pe.metadataEnhancer.publishedAt=pe.metadataEnhancer.publishedAt||{},pe.metadataEnhancer.tags=pe.metadataEnhancer.tags||{}}function p(){return me}function g(){return"number"!=typeof me&&(me=me.replace("MIN-","")),parseInt(me)}function h(){return pe.scraper.filter}function f(e){return e==o.Emitter.PRODUCT_IN_ARTICLE?pe.inArticlePlacer.filter:pe.regularPlacer.filter}function v(){return ge.rezVideo}function m(){return ge.rezVertical}function y(){return Ee&&!_e}function E(){return pe.scraper.enableEventCollection}function _(){return pe.scraper.type2}function P(){return pe.scraper.IAContainers}function S(){return pe.scraper.featuredWrapper}function I(){return 50}function A(){return 1}function w(){return 1}function T(){return pe.regularPlacer.blockingDistance.staticBlockersSelector}function D(){return 10}function b(){return pe.general.testGroupSize}function C(){return"opacity 0.5s ease-out"}function O(){return!!t.sendBeaconNative&&!ve.isEdge()}function L(){return pe.placements||[]}function N(){return"Optimized by minute.ly"}function R(){return ge.baseVideoUrl||""}function F(){return pe.general.errorReport}function U(){return pe.inArticlePlacer.active}function V(){return pe.inArticlePlacer.showLogo}function M(){return pe.inArticlePlacer.logoPosition}function k(){return pe.regularPlacer.maxApvsPerPage}function B(){return pe.regularPlacer.minimumWidth}function x(){return pe.regularPlacer.minimumHeight}function W(){return pe.regularPlacer.validRatio}function H(){return pe.regularPlacer.logoPosition}function G(){return pe.regularPlacer.renderModulus}function Y(){return pe.regularPlacer.applyZIndexReorder}function j(){return pe.regularPlacer.showLogo}function q(){return pe.regularPlacer.watchFull}function J(){return pe.regularPlacer.disableParentTransform}function z(){return pe.regularPlacer.playerTransformScale}function K(){return pe.regularPlacer.containerTransformScale}function X(){return pe.inArticlePlacer.watchFull}function Z(){return pe.regularPlacer.blockingDistance.radius}function Q(){return pe.regularPlacer.clickByPoint}function $(){return ge.server_version}function ee(){return"https://minute.ly"}function te(){return pe.general.shareMinuteEvent}function re(e){if(ve.isMobile())return o.playmode.VIEWPORT;var t=pe.regularPlacer.playmode;e===o.Emitter.PRODUCT_IN_ARTICLE&&(t=pe.inArticlePlacer.playmode);var r=Object.keys(o.playmode).map(function(e){return o.playmode[e]});return r.indexOf(t)===-1?o.playmode.VIEWPORT:t}function ne(){return pe.general.shouldWaitForLoadEvent}function ie(){return pe.regularPlacer.noDuplicateVideos}function oe(){return pe.regularPlacer.blockingDistance.active}function ae(){return t.parseBool(pe.regularPlacer.ignoreShouldRender,!1)}function se(){return pe.scraper.autopush}function le(){return pe.regularPlacer.trackSize}function ce(){return pe.general.welcomeToMinuteSize}function ue(){return pe.metadataEnhancer.publishedAt}function de(){return pe.metadataEnhancer.tags}var pe={},ge={},he={},fe=null,ve=null,me=e._publisher,ye=null,Ee=null,_e=null;return{init:r,getFilterPlacements:f,getStaticBlockerSelector:T,getEpsilonPercentage:D,getMaxApvsPerPage:k,getMinimumWidth:B,getMinimumHeight:x,getValidRatio:W,getLogoPosition:H,getRenderModulus:G,shouldApplyZIndexReorder:Y,getShowLogo:j,getRegularPlacerWatchFullSettings:q,isClickByPointEnabled:Q,getBlockingDistanceRadius:Z,noDuplicateVideos:ie,isBlockingServiceActive:oe,shouldTrackSize:le,getDisableParentTransform:J,getRegularPlacerPlayerTransformScale:z,getRegularPlacerContainerTransformScale:K,getTestGroupSize:b,getIsEnableErrorReport:F,shareMinuteEvent:te,shouldWaitForLoadEvent:ne,getPublisherId:p,getPublisherIdNumber:g,getRezVideo:v,getRezVertical:m,getViewportAnalyticsPercentage:I,getViewportAnalyticsTimeSpan:A,getViewportPercentage:w,getEffectApvTransitionVideo:C,getCanReportImmediately:O,getTooltip:N,getBaseVideoUrl:R,getRelativePlacements:L,getServerVersion:$,getBaseLinkUrl:ee,getPlaymode:re,isInArticlePlacerActive:U,getInArticleViewportMask:l,getInArticleShowLogo:V,getInArticleLogoPosition:M,getInArticlePlacerWatchFullSettings:X,getIgnoreShouldRender:ae,isScraperEnable:y,getFilterScraper:h,isScraperEnableEventCollection:E,getScraperType2:_,getIAContainers:P,getFeaturedWrapper:S,getAutopushCriteria:se,getWelcomeToMinuteSize:ce,getPublishedAtConfig:ue,getTagsConfig:de}},I=function(t,r,n,i,a){function s(e,t){return t+"_"+e}function l(e,t,r){e[t]?e[t].push(r):e[t]=[r]}function c(e){for(var r,n=0;n<e.length;n++){r=e[n],r.highlights=a.initActiveHighlights(r.highlights);var o=i.create(r);D.push(o);var c=s(o.getPublisherVideoId(),o.getArticleUrl());C[c]?t.logWarning("didn't add duplicate unifiedKey"):(l(b,o.getArticleUrl(),o),l(C,o.getArticleUrl(),o),l(C,c,o),o.getDoesCollect()&&l(O,c,o))}}function u(r){w=r.videos||[],I=e.debugParams[h.ACTIVE_ALL]||e.debugParams[h.MINUTE_UI_TEST],t.log("VideoManager total original video count: "+w.length),c(w),t.log("VideoManager total videos for IA: "+Object.keys(C).length+" and Regulars: "+Object.keys(b).length)}function p(e){if(!f()){var r=e.videos||[];w=w.concat(r),t.log("VideoManager append total original video count: "+w.length),c(r,!0),t.log("VideoManager total valid video count: "+D.length),d.dispatchEvent(o.Events.VIDEOS_UPDATE)}}function g(){return T!==A}function f(){return I||localStorage&&!!localStorage.getItem("minActiveAll")}function v(){return D.length}function m(e){return!!e&&(!!f()||!!C[e])}function y(e){if(f())return b[Object.keys(b)[0]][0];if(e){e=t.urls.getCanonicalURL(e);var r=b[e];if(r&&0!=r.length){if(1===r.length)return r[0];for(var n=void 0,i=0;i<r.length;i++){var a=r[i];if(a.hasAPVByProduct(o.Emitter.PRODUCT_APV)){if(n){t.logError("more than one video is set as featured/regular for url: "+e);break}n=a}}return n}}}function E(e,r){r=r||(t.urls.isUrlHomePage()?e:t.urls.getCurrentCanonicalURL());var n=s(e,r),i=C[n];return i&&0!==i.length?(i.length>1&&t.logError("Not suppose to get multiple publisher video id in the same Article Url."),i[0]):null}function _(e,r){r=r||t.urls.getCurrentCanonicalURL();var n=s(e,r),i=O[n];return i&&0!==i.length?(i.length>1&&t.logError("Not suppose to get multiple publisher video id in the same Article Url."),i[0]):null}function P(e){return i.create({id:0,videoId:e,articleUrl:t.urls.getCurrentCanonicalURL(),doesCollect:!1,highlights:[]},!0)}function S(e){var t=Object.keys(C).filter(function(t){return t.indexOf(e)>=0})[0];return t?C[t][0]:null}var I,A=-2,w=[],T=A,D=[],b={},C={},O={};return{init:u,isDebug:g,appendVideos:p,isActiveAll:f,getArticlesListLength:v,getRegularArticleDataByURL:y,generateArticleData:P,hasInArticleArticleDataForUrl:m,getInArticleArticleData:E,getCrowdSourceArticleData:_,getInArticleArticleDataByVideo:S}},A=function(e,t,r,n){function i(){return Math.floor(100*Math.random()+1)<=E}function a(){if(1==t.__minNoTestMode)return v=!1,n.setItem(g,!1),void e.logWarning("Owl no test mode!");var i="undefined"!=typeof r;if(i){if("clear"!==r)return v="true"==r,n.setItem(g,!0),void e.log("Force test group: "+v);e.log("Force RESET test group"),n.removeItem(g)}else;v=s(),m||(e.log("** Is Test Group: "+v),m=!0)}function s(){var t=n.getItem(g);if(!t||e.isMidnightPassed(t[h])){var r=i();return n.setItem(g,{timeStamp:e.getTimeNow(),TestMode:r}),r}return t[g]}function l(e,t){E=e,y=f.READY,a()}function c(){return y===f.READY}function u(){return v}function d(){return v===!0?"1":"0"}function p(){v=null,m=!1,y=f.NONE,E=null,N.reset()}var g=o.StorageKeys.TestMode,h="timeStamp",f={NONE:0,PENDING:1,READY:2},v=null,m=!1,y=f.NONE,E=null;return{init:l,isReady:c,isTestGroup:u,getGroupCode:d,reset:p}},w=function(e,t,r){function n(t){if(t&&r.shareMinuteEvent()){var n=t.apvData&&t.apvData.getBelongToUrl()||e.urls.getCurrentCanonicalURL(),i={url:n,target_url:t.apvData._rawAnchorValue||t.articleData.getArticleUrl(),test_group:F.isTestGroup(),minute_apv_id:t.apvData.getHighlightId()};if(!t.apvData.uniq){var a=new CustomEvent(o.Emitter.MINUTE_VIEWPORT_EVENT,{detail:i});window.dispatchEvent(a)}}}return{dispatchImpression:n}},T=function(){function t(t){var r={id:e._publisher,user_agent:navigator.userAgent,uniq:t,test_mode:F.isTestGroup(),url:s.urls.getCurrentCanonicalURL(),referrer:document.referrer.substr(0,200),source:L.getAnalyticsSource(),comp:L.isBrowserSupported(),stor:!!b,script_time:g.getScriptTime(),config_time:g.getConfigTime(),event_time_from_genesis:g.getTimeFromGenesis(),event_time_from_minute_genesis:g.getTimeFromMinuteGenesis()};R.send(o.Emitter.URL_REPORT,s.cloneObject(r)),t&&(r.uniq=!1,R.send(o.Emitter.URL_REPORT,r)),d.dispatchEvent(o.Events.CLIENT_INIT_ANALYTICS)}function r(){n=!1,N.get(i)||(N.set(i,!0),n=!0),t(n)}var n,i="SessionSent";return{sendUrlReport:r}}(),D=function(t,r,n,i,a,s){function l(){var i={id:e._publisher,user_agent:navigator.userAgent,test_mode:r.isTestGroup(),url:t.urls.getCurrentCanonicalURL(),referrer:document.referrer.substr(0,200),source:n.getAnalyticsSource(),comp:n.isBrowserSupported(),stor:!0,script_time:a.getScriptTime(),config_time:a.getConfigTime(),event_time_from_genesis:a.getTimeFromGenesis(),event_time_from_minute_genesis:a.getTimeFromMinuteGenesis(),daily_user:s.getUserId()};R.send(o.Emitter.DAILY_USER,i)}function c(){var e=i.getItem(o.StorageKeys.DailyUser);e&&!t.isMidnightPassed(e)||(l(),i.setItem(o.StorageKeys.DailyUser,t.getTimeNow()),d.dispatchEvent(o.Events.DAILY_USER))}return{start:c}};!function(){function e(){function e(e){var t=e.getSubType?e.getSubType():a.scrap.player.SubTypes.DEFAULT;g[e.getType()]=g[e.getType()]||{},g[e.getType()][t]=e}function t(e){var t=Object.keys(a.scrap.PlayersNameEnum).map(function(e){return a.scrap.PlayersNameEnum[e]});t.indexOf(e.getName())!=-1&&(f[e.getName()]=e)}function r(e){return f[e]}function n(e,t){return g[e]&&g[e][t||a.scrap.player.SubTypes.DEFAULT]}function i(){return g}function o(){return f}function s(){return Object.keys(g)}function l(e){var t=Object.keys(a.scrap.REGISTRED_DRIVERS);t.indexOf(e.getName())>-1&&(h[e.getName()]=e)}function c(e){return h[e]}function u(){return v}function d(e){v[e.getName()]=e}function p(e){return v[e]}var g={},h={},f={},v={};return{addItem:e,addDetector:t,getDetector:r,getAllRegisterdDetectors:o,getItem:n,addDriver:l,getDriver:c,getAllItemTypes:s,getAllRegisterdItem:i,addPicker:d,getPicker:p,getAllRegisteredPickers:u}}a.scrap=a.scrap||{},a.scrap.utils=a.scrap.utils||{},a.scrap.player=a.scrap.player||{},a.scrap.detector=a.scrap.detector||{},a.scrap.driver=a.scrap.driver||{},a.scrap.picker=a.scrap.picker||{},a.scrap.plugin=a.scrap.plugin||{},a.scrap.utils.defineError=function(e,t,r){r=r?" "+r:"",s.logError("Scraper "+(e?"'"+e.getName()+"' ":"")+"'"+t+"' Not Defined."+r)},a.scrap.REGISTRED_DRIVERS=JSON.parse("{}"),a.scrap.PlayersNameEnum=JSON.parse('{"Calcalist":"Calcalist"}'),a.scrap.PlayerEnum={DEFAULT:99,DEFAULT_99:99,Flowplayer:1,OOYALA:2,YOUTUBE:6,DailyMotion:6,Jwplayer:8,VideoJSIFrame:12,VideoJS:13,NBA:15,Edge:17,ThePlatformFoxSports:26,ThePlatformBravo:29,NFL:32,ThePlatformCnbc:33,CINCOPA:34,VjsNew:36,Channel10:37,MLB:39,EdgeBrightcove:39,CBSsports:40,WsbtvAnvato:41,JWFox:6,ZEE5:43,Vidible:44,DUMONT:46,MMM:47,Fotbolls:48,MLB_FORGE:49,MAGENTA:50,ESPORT:51,ELEAGUE:52,Telecine:53,WWE:54,UFC:55,GLOMEX:56,MOTORSPORT:6,VideoJSPethnow:13,NBC_Chicago:57,Motor1:6,VideoJSPethnow:13,Gray:99,Krone:99,Calcalist:99,USAToday:99,JwplayerArmstrong:8,Telemoundo:6,FoxSportsAU:99,TaboolaWionews:99,JwplayerCycling:8,Essence:99,JwplayerGolfChannel:99,NFLTheoPlayer:99,MorganPost:99,JwplayerSport1:99,Mynet:6};var t=a.scrap.ScrapPlugin={VIDEO_VIEW:1,VISUAL_CLICKS:3,PLAYER_CONTENT_CHANGED:5,PLAYER_FOUND:7,PLACEHOLDER_FOUND:8,PLAYER_VIDEO_CHANGED:9};a.scrap.ScrapPluginAll=[t.VIDEO_VIEW,t.VISUAL_CLICKS,t.PLAYER_FOUND,t.PLACEHOLDER_FOUND,t.PLAYER_VIDEO_CHANGED],a.scrap.player.SubTypes={DEFAULT:"default"},a.scrap.driver={},a.scrap.driver.PlayerAction={NONE:"none",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering",ERROR:"error",ENDED:"ended",SEEK_START:"seekStart",SEEK_END:"seekEnd",VOLUME_CHANGE:"volume",MUTE_CHANGE:"mute",FULLSCREEN:"fullscreen",NEW_VIDEO:"newVideo",REPLAY:"replay",FOCUS:"focus"},a.scrap.utils={},a.scrap.utils.roundValue=function(e){return Math.round(1e3*e)/1e3},a.scrap.consts={VOLUME_EMPTY:-2,TIME_EMPTY:-1},a.scrap.factory=function(){var t=new e,r=new e,n=new e,i=new e;return{addPlugin:n.addItem,getPlugin:n.getItem,addDetector:t.addDetector,getDetector:t.getDetector,getAllRegisterdDetectors:t.getAllRegisterdDetectors,addDriver:r.addDriver,getDriver:r.getDriver,addPicker:i.addPicker,getPicker:i.getPicker,getAllRegisteredPickers:i.getAllRegisteredPickers}}()}(),function(){function e(){}var t=a.scrap.utils.defineError;e.shouldRun=function(){return!0},e.prototype.getType=function(){t(null,"getType")},e.prototype.setPlayerCollection=function(e){},e.prototype.addDriver=function(e){},a.scrap.plugin.Base=e}(),function(){function e(){this._playerOnHold={},d.addEventListener(o.Events.VIDEOS_UPDATE,this.handleVideosUpdate.bind(this))}s["extends"](e,a.scrap.plugin.Base),e.getType=function(){return a.scrap.ScrapPlugin.PLACEHOLDER_FOUND},e.getName=function(){return"PlaceholderFound"},e.prototype.getType=function(){return e.getType()},e.prototype.setPlayerCollection=function(e){e.onPlayerPlaceholderFound().add(this.handleDetector_PlayerPlaceholderFound,this)},e.prototype.handleVideosUpdate=function(){for(var e=Object.keys(this._playerOnHold),t=0;t<e.length;t++){var r=e[t],n=this._playerOnHold[r];n&&M.hasInArticleArticleDataForUrl(n.url)&&(this.sendEvent(n),this._playerOnHold[r]=null)}},e.prototype.handleDetector_PlayerPlaceholderFound=function(e){var t=M.getInArticleArticleData(e.videoId,e.url);t?this.sendEvent(e):(s.log("Player Placeholder found - WAITING for ArticleData:"),s.logObject(e),this._playerOnHold[e.videoId]=e)},e.prototype.sendEvent=function(e){var t=M.getInArticleArticleData(e.videoId,e.url);return t?(s.log("Player Placeholder Found - READY:"),s.logObject(e),void d.dispatchEvent(o.Events.PLAYER_PLACEHOLDER_FOUND,{container:e.element,playerJS:e.playerJS,videoId:e.videoId,articleUrl:e.url,articleData:t})):(s.log("Player Placeholder Found - does NOT have correct Video ID:"),void s.logObject(e))},a.scrap.plugin.PlaceholderFound=e,a.scrap.factory.addPlugin(e)}(),function(){function e(){this._playerOnHold={},d.addEventListener(o.Events.VIDEOS_UPDATE,this.handleVideosUpdate.bind(this))}s["extends"](e,a.scrap.plugin.Base),e.getType=function(){return a.scrap.ScrapPlugin.PLAYER_FOUND},e.getName=function(){return"PlayerFound"},e.prototype.getType=function(){return e.getType()},e.prototype.setPlayerCollection=function(e){e.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this)},e.prototype.handleVideosUpdate=function(){for(var e=Object.keys(this._playerOnHold),t=0;t<e.length;t++){var r=e[t],n=this._playerOnHold[r];n&&M.hasInArticleArticleDataForUrl(n.url)&&(this.sendEvent(n),
this._playerOnHold[r]=null)}},e.prototype.handleDetector_PlayerInstanceFound=function(e){var t=M.getInArticleArticleData(e.videoId,e.data.url);t?this.sendEvent(e):(s.log("Player Found - WAITING for articleData:"),s.logObject(e),this._playerOnHold[e.playerId]=e)},e.prototype.sendEvent=function(e){var t=M.getInArticleArticleData(e.videoId,e.url);return t?(s.log("Player Found - READY:"),s.logObject(e),void d.dispatchEvent(o.Events.PLAYER_FOUND,{container:e.playerPlaceholder,playerJS:e.playerJS,videoId:e.videoId,articleUrl:e.url,autoplay:e.isPlayerStarted,articleData:t})):(s.log("Player Found - does NOT have correct Video ID:"),void s.logObject(e))},a.scrap.plugin.PlayerFound=e,a.scrap.factory.addPlugin(e)}(),function(){function e(){}s["extends"](e,a.scrap.plugin.Base),e.getType=function(){return a.scrap.ScrapPlugin.PLAYER_VIDEO_CHANGED},e.getName=function(){return"PlayerVideoChanged"},e.prototype.getType=function(){return e.getType()},e.prototype.addDriver=function(e){e.onPlayerVideoChanged().add(this.handleDriver_PlayerVideoChanged,this)},e.prototype.handleDriver_PlayerVideoChanged=function(e){d.dispatchEvent(o.Events.PLAYER_VIDEO_CHANGED,{container:e.scrapData.playerPlaceholder,playerJS:e.scrapData.playerJS,articleUrl:e.scrapData.url,videoId:e.scrapData.videoId,newVideoId:e.videoId})},a.scrap.plugin.PlayerVideoChanged=e,a.scrap.factory.addPlugin(e)}(),function(){function t(){t.__superCtor__.call(this),this._driverList=[]}s["extends"](t,a.scrap.plugin.Base),t.getType=function(){return a.scrap.ScrapPlugin.VIDEO_VIEW},t.getName=function(){return"VideoViews"},t.prototype.getType=function(){return t.getType()},t.prototype.addDriver=function(e){this._driverList.push(e),e.onVideoView().add(this.handleVideoView,this)},t.prototype.handleVideoView=function(t){d.dispatchEvent(o.Events.PLAYER_PLAYING,{videoId:t.videoId,counter:t.counter});var r={url:t.url,vid:t.videoId,test_mode:F.getGroupCode(),comp:L.isBrowserSupported()?1:0,source:L.getAnalyticsSource(),publisher:e._publisher,hadImpression:t.hadImpression,hadImpressionSession:visibilityAnalyticsService.hadImpressionSession(),counter:t.counter,script_time:g.getScriptTime(),config_time:g.getConfigTime()};R.send(o.Emitter.VIDEO_VIEWS,r)},a.scrap.plugin.VideoViews=t,a.scrap.factory.addPlugin(t)}(),function(){function e(){this._onPlayerInstanceFound=new a.utils.Signal,this._onPlayerFeaturedInstanceFound=new a.utils.Signal,this._onPlayerPlaceholderFound=new a.utils.Signal,this._onContainerPlaceholderList=new a.utils.Signal,this._detectorList=[],this._pickerList=[],this._counter=0,this._scraperTimer=null}a.scrap.DetectorsCollector=e,e.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},e.prototype.onPlayerFeaturedInstanceFound=function(){return this._onPlayerFeaturedInstanceFound},e.prototype.onContainerPlaceholderList=function(){return this._onContainerPlaceholderList},e.prototype.onPlayerPlaceholderFound=function(){return this._onPlayerPlaceholderFound},e.prototype.init=function(){this.initPlayers(),this.initPicker(),this.startTimer(),this.detectNewPlayers()},e.prototype.initPlayers=function(){for(var e,t,r=a.scrap.factory.getAllRegisterdDetectors(),n=Object.keys(r),i=0;i<n.length;i++)e=a.scrap.factory.getDetector(n[i]),t=new e,t.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this),t.onPlayerPlaceholderFound().add(this.handleDetector_PlayerPlaceholderFound,this),t.onContainerPlaceholderList().add(this.handleDetector_ContainerPlaceholderList,this),this._detectorList.push(t);0===this._detectorList.length&&s.log("No scrapers found to initialize.")},e.prototype.initPicker=function(){for(var e,t=a.scrap.factory.getAllRegisteredPickers(),r=Object.keys(t),n=0;n<r.length;n++)e=a.scrap.factory.getPicker(r[n]),this.createPicker(e);0===this._pickerList.length&&(this.createPicker(a.scrap.picker.Base),s.log("No picker found to initialize - using Base"))},e.prototype.addDriver=function(e){for(var t=0;t<this._pickerList.length;t++){var r=this._pickerList[t];r.addDriver(e)}e.onDisposed().addOnce(this.handleDriver_Disposed,this)},e.prototype.createPicker=function(e){var t=new e;t.setPlayerCollection(this),t.onPlayerFeaturedInstanceFound().add(this.handlePicker_PlayerFeaturedInstanceFound,this),this._pickerList.push(t)},e.prototype.handleDetector_PlayerInstanceFound=function(e){e.index=this._counter,this._onPlayerInstanceFound.dispatch(e),this._counter++},e.prototype.handleDetector_PlayerPlaceholderFound=function(e){this._onPlayerPlaceholderFound.dispatch(e)},e.prototype.handlePicker_PlayerFeaturedInstanceFound=function(e){this._onPlayerFeaturedInstanceFound.dispatch(e)},e.prototype.handleDetector_ContainerPlaceholderList=function(e){this._onContainerPlaceholderList.dispatch(e)},e.prototype.handleDriver_Disposed=function(e){for(var t=0;t<this._detectorList.length;t++){var r=this._detectorList[t];r.playerDisposed(e.getID())}},e.prototype.startTimer=function(){d.addEventListener(o.Events.THREE_SECONDS_INTERVAL,this.detectNewPlayers,this)},e.prototype.detectNewPlayers=function(){for(var e=0;e<this._detectorList.length;e++){var t=this._detectorList[e];t.detectNewPlayers()}}}(),function(){function e(e){this._detectorCollection=e,this._pluginHash=[],this._init()}a.scrap.PluginsCollector=e,e.prototype.addDriver=function(e){for(var t=0;t<this._pluginHash.length;t++){var r=this._pluginHash[t];r.addDriver(e)}},e.prototype._init=function(){for(var e=0;e<a.scrap.ScrapPluginAll.length;e++){var t=a.scrap.factory.getPlugin(a.scrap.ScrapPluginAll[e]);if(t)if(!t.shouldRun||t.shouldRun()){var r=new t;r.setPlayerCollection(this._detectorCollection),this._pluginHash.push(r)}else s.log("Plugin "+(t.getName()||t.getType())+" is not running.")}}}(),function(){function e(){e.__superCtor__.call(this),this._driverHash={},this._detectorCollection=new a.scrap.DetectorsCollector,this._detectorCollection.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this),this._detectorCollection.init(),this._pluginsCollection=new a.scrap.PluginsCollector(this._detectorCollection),a.scrap.startUrlTracker(this._detectorCollection)}s["extends"](e,i);var t=a.publisher.utils;e.prototype.handleDetector_PlayerInstanceFound=function(e){this._driverHash[e.playerId]||this.createScrapDriver(e)},e.prototype.handleDriver_Disposed=function(e){this._driverHash[e.getID()]=void 0},e.prototype.createScrapDriver=function(e){var r,n=Object.keys(a.scrap.REGISTRED_DRIVERS);if(t.getDriverName?r=a.scrap.factory.getDriver(t.getDriverName(e)):1==n.length?r=a.scrap.factory.getDriver(a.scrap.REGISTRED_DRIVERS[n[0]]):0==n.length||s.logWarning("Dont know what driver to set, need coordinator (_pubUtils.getDriverName)"),!r)return void s.log("No driver registered. Please add your driver on 'registeredDrivers' configuration! ");var i=M.getCrowdSourceArticleData(e.videoId,e.url),o=new r;o.setArticleData(i),o.setScrapData(e),this._pluginsCollection.addDriver(o),this._driverHash[e.playerId]=o,o.onDisposed().addOnce(this.handleDriver_Disposed,this),this._detectorCollection.addDriver(o),o.init()},a.scrap.ScraperService=e}(),function(){function e(){this._state=0,this._onPlayerInstanceFound=new a.utils.Signal,this._onPlayerPlaceholderFound=new a.utils.Signal,this._onContainerPlaceholderList=new a.utils.Signal,this._foundList={},this._validatePlayerConfig(),this._setStateIdle()}var t=a.publisher.utils,r=/[^\d\w\s\-?!\u0590-\u05fe\.,]/g,n=a.scrap.player.EState={IDLE:1,SEARCHING:2,FOUND:3},i=a.scrap.utils.defineError;e.prototype._validatePlayerConfig=function(){},e.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},e.prototype.onPlayerPlaceholderFound=function(){return this._onPlayerPlaceholderFound},e.prototype.onContainerPlaceholderList=function(){return this._onContainerPlaceholderList},e.prototype.detectNewPlayers=function(e){this.isIdle()&&(this._state=n.SEARCHING,setTimeout(this._detectNewPlayers.bind(this),e?e:0))},e.prototype.playerDisposed=function(e){this._hasPlayerInstanceFound(e)&&(this._foundList[e]=!1)},e.prototype._detectNewPlayers=function(){},e.prototype._collectScraperData=function(e,t){var n={},i={},o=255;n.data=i,i.duration=this._getVideoDuration(e,t),i.version="NoName",i.video_id=this._getVideoId(e,t),i.stream=this._getVideoStream(e,t),i.url=this._getPlayerUrl(e,t),i.raw_url=this._getPlayerUrlRaw(e,t),i.title=(this._getVideoTitle(e,t)||"").replace(r,"").substring(0,o),i.raw_title=s.b64EncodeUnicode(this._getVideoTitle(e,t)||""),i.publisher=V.getPublisherId(),i.player_id=this.getScraperPlayerId(e,t);var a=this._getEmbedPlayerUrl(e,t);return a&&(i.metadata={embedPlayerUrl:a}),n.index=-1,n.videoId=i.video_id,n.playerId=this._getPlayerId(e,t)||n.videoId,n.url=i.url,n.playerJS=e,n.playerHtmlElement=t,n.playerConfig=this._configPlayer,n.isLive=this._getIsLive(e,t),n.isAutoPlay=this._getIsAutoPlay(e,t),n.isPlayerStarted=n.isAutoPlay||this._getIsPlayerStarted(e,t),n.playerPlaceholder=this._getPlayerPlaceholder(e,t),n.isFeatured=this._getIsFeatured(e,t),n},e.prototype._setStateIdle=function(){this._state=n.IDLE},e.prototype._setStateFound=function(){this._state=n.FOUND},e.prototype.isIdle=function(){return this._state===n.IDLE},e.prototype._sendPlayerInstanceFound=function(e){this._onPlayerInstanceFound.dispatch(e)},e.prototype._addPlayerInstanceFound=function(e){return this._foundList[e]=!0},e.prototype._hasPlayerInstanceFound=function(e){return this._foundList.hasOwnProperty(e)},e.prototype._getVideoId=function(e,t){i(this,"_getVideoId")},e.prototype._getVideoStream=function(e,t){i(this,"_getVideoStream")},e.prototype._getVideoTitle=function(e,r){return t&&t.getVideoTitle&&t.getVideoTitle(e)?t.getVideoTitle(e):document.title},e.prototype.getScraperPlayerId=function(e,t){return a.scrap.PlayerEnum.DEFAULT_99},e.prototype._getIsLive=function(e,t){return!1},e.prototype._getIsAutoPlay=function(e,t){return null},e.prototype._getIsFeatured=function(e,t){},e.prototype._getEmbedPlayerUrl=function(e,t){},e.prototype._getIsPlayerStarted=function(e,t){return!1},e.prototype._getPlayerId=function(e,t){return""},e.prototype._getPlayerSubType=function(e,t){return this._configPlayer.subType&&a.scrap.player.SubTypes[this._configPlayer.subType]||""},e.prototype._getPlayerUrl=function(e,t){return s.urls.getCurrentCanonicalURL()},e.prototype._getPlayerUrlRaw=function(e,t){return s.urls.getStructuredRawByUrl(s.urls.getLocationUrl())},e.prototype._getPlayerPlaceholder=function(e,t){return null},e.prototype.getVideoTags=function(e,r){if(t&&t.getTags)return t.getTags(e)},e.prototype._getVideoDuration=function(e,t){return 0},a.scrap.detector.Base=e}(),function(){function e(){this._articleData=null,this.scrapData=null,this._onDisposed=new a.utils.Signal,this._onPlayerAction=new a.utils.Signal,this._onPlayerProgress=new a.utils.Signal,this._onVideoView=new a.utils.Signal,this._onError=new a.utils.Signal,this._onPlayerInstanceFound=new a.utils.Signal,this._onPlayerVideoChanged=new a.utils.Signal,this._analyser=null,this._progressTimer=null,this._handleFocusInEvent=null,this._handleFocusOutEvent=null,this._doesCollect=null,this._sessionId=s.generateUID()}var t=a.scrap.utils.defineError,r=a.scrap.driver.PlayerAction,n=!1;e.prototype.getID=function(){return this.scrapData.playerId},e.prototype.getType=function(){t(null,"getType")},e.prototype.getName=function(){t(null,"getName")},e.prototype.setArticleData=function(e){this._articleData=e},e.prototype.getArticleData=function(){return this._articleData},e.prototype.setScrapData=function(e){this.scrapData=e},e.prototype.checkVideoView=function(){t(null,"checkVideoView")},e.prototype.onPlayerAction=function(){return this._onPlayerAction},e.prototype.onDisposed=function(){return this._onDisposed},e.prototype.onPlayerProgress=function(){return this._onPlayerProgress},e.prototype.onVideoView=function(){return this._onVideoView},e.prototype.onError=function(){return this._onError},e.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},e.prototype.onPlayerVideoChanged=function(){return this._onPlayerVideoChanged},e.prototype.sendPlayerActionEvent=function(e,t){this._onPlayerAction.dispatch("status",t)},e.prototype.sendPlayerProgressEvent=function(e){this._onPlayerProgress.dispatch(e)},e.prototype.readyToSendCrowdSourceEvents=function(e,t){return!0},e.prototype.sendPlayerEvent=function(e,t){if(this._doesCollect&&this.readyToSendCrowdSourceEvents()&&this.isFirstVideoPlaying()&&this.getPlayerCurrentVideoId&&this._articleData.getPublisherVideoId()===this.getPlayerCurrentVideoId()){var r={cs_id:this._sessionId,article_id:this._articleData.getArticleId(),min_vid_id:this._articleData.getVideoDBId(),video_id:this.getPlayerCurrentVideoId(),min_playhead:this.getCurrentPlayhead(),min_event_type:t,min_metadata:this.getMeteData(t),event_timestamp:(new Date).getTime(),player:this.getPlayerName(),raw_event:JSON.stringify(e)};R.send(o.Emitter.CROWD_SOURCE,r)}},e.prototype.isFirstVideoPlaying=function(){return!0},e.prototype.getMeteData=function(){},e.prototype.getPlayerName=function(){return"base"},e.prototype.init=function(){this._articleData=this._articleData||M.generateArticleData(this.scrapData.id),this._canCollectEvents()?(this.startListenWindowFocusEvent(),this.sendCurrentFocusState(),n=!0):s.log("Will not collect video events"),this.trackDisposableDomElement()},e.prototype._canCollectEvents=function(){this._doesCollect=s.parseBool(this._doesCollect,!1);var e=L.isChrome()&&L.isDesktop()&&!L.isEdge()&&!L.isIE()&&!L.isSafari()&&!L.isFF();return this._doesCollect=!n&&V.isScraperEnableEventCollection()&&this._articleData.getDoesCollect()&&e,this._doesCollect},e.prototype.trackDisposableDomElement=function(){var e=this._getDisposableDomElement();e&&(this._domTracker=new a.utils.DomElementTracker(e),this._domTracker.setTrackingOptions({parentElement:this._getDisposableDomElementParent()}),this._domTracker.onRemovedFromDom.add(this.dispose,this),this._domTracker.start())},e.prototype._getDisposableDomElement=function(){return null},e.prototype._getDisposableDomElementParent=function(){return null},e.prototype.dispose=function(){this._onDisposed.dispatch(this),this._analyser&&(this._analyser.dispose(),this._analyser=null),this._articleData=null,this.scrapData=null,this._onPlayerAction.removeAll(),this._onPlayerAction=null,this._onPlayerProgress.removeAll(),this._onPlayerProgress=null,this._onVideoView.removeAll(),this._onVideoView=null,this._onDisposed.removeAll(),this._onDisposed=null,this.stopProgressTimer(),this._progressTimer=null,this._domTracker&&(this._domTracker.dispose(),this._domTracker=null),this.stopListenWindowFocusEvent()},e.prototype.getCurrentVideoId=function(){t(this,"getCurrentVideoId")},e.prototype.stopProgressTimer=function(){this._progressTimer&&this._progressTimer.stop()},e.prototype.startListenWindowFocusEvent=function(){this._handleFocusInEvent||(this._handleFocusInEvent=this.handleFocusInEvent.bind(this),this._handleFocusOutEvent=this.handleFocusOutEvent.bind(this),window.addEventListener?(window.addEventListener("focus",this._handleFocusInEvent,!1),window.addEventListener("blur",this._handleFocusOutEvent,!1)):window.attachEvent&&(window.attachEvent("focus",this._handleFocusInEvent),window.attachEvent("blur",this._handleFocusOutEvent)))},e.prototype.stopListenWindowFocusEvent=function(){this._handleFocusInEvent&&(window.removeEventListener?(window.removeEventListener("focus",this._handleFocusInEvent,!1),window.removeEventListener("blur",this._handleFocusOutEvent,!1)):window.detachEvent&&(window.detachEvent("focus",this._handleFocusInEvent),window.detachEvent("blur",this._handleFocusOutEvent)),this._handleFocusInEvent=null,this._handleFocusOutEvent=null)},e.prototype.handleFocusInEvent=function(e){this.sendPlayerActionEvent(r.FOCUS,!0),this.sendPlayerEvent({focus:!0},"focus")},e.prototype.handleFocusOutEvent=function(e){this.sendPlayerActionEvent(r.FOCUS,!1),this.sendPlayerEvent({focus:!1},"focus")},e.prototype.sendCurrentFocusState=function(){this.sendPlayerActionEvent(r.FOCUS,document.hasFocus()),this.sendPlayerEvent({focus:document.hasFocus()},"focus")},a.scrap.driver.Base=e}(),function(){function e(){this._onPlayerFeaturedInstanceFound=new a.utils.Signal,this._currentScraperData=null,this._placeholderFoundList=[],this._topMostPlaceholder=null,this._alreadySentFeatured=!1}var t=a.publisher.utils;e.prototype.setPlayerCollection=function(e){e.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this,1)},e.prototype.addDriver=function(e){e.onPlayerInstanceFound().add(this.handleDriver_PlayerInstanceFound,this)},e.prototype.onPlayerFeaturedInstanceFound=function(){return this._onPlayerFeaturedInstanceFound},e.prototype.isScrapDataValid=function(e){return!!e&&(e.data.player_id?!!s.validateScraperURL()&&(""===e.url||s.urls.isUrlHomePage()?(s.log("Scrap cancel: I think I am on homepage..."),!1):e.isLive?(s.log("Scrap canceled: Live player instance."),!1):e.data.video_id&&e.data.stream?t.shouldScrap&&!t.shouldScrap(e)?(s.log("Scrap canceled: due to publisher utils"),!1):!window.top.document.querySelector("html[class*='translated']")||(s.log("Scrap canceled: Page is translated by client using google translate"),!1):(s.log("Scrap canceled: Missing data. video_id: '"+e.data.video_id+"', stream: '"+e.data.stream+"'"),!1)):(s.log("Scraper cancel: missing Player_id for scraper"),!1))},e.prototype.setFeatureFlag=function(e){if(V.getFeaturedWrapper()){var r=V.getFeaturedWrapper();e.data.featured=!!document.querySelector(r)&&!!document.querySelector(r).contains(e.playerPlaceholder)}else t.setFeatureFlag?e.data.featured=t.setFeatureFlag(e):this._alreadySentFeatured?e.data.featured=!1:("undefined"!=typeof e.isFeatured?e.data.featured=e.isFeatured:(this.setTopMostContainer(),this._topMostPlaceholder?e.data.featured=!!this._topMostPlaceholder.contains(e.playerPlaceholder):(s.logError("Top most placeholder is not set, This has to be set!"),e.data.featured=!1)),e.data.featured&&(this._alreadySentFeatured=!0))},e.prototype.handleDetector_PlayerInstanceFound=function(e){if(this.isScrapDataValid(e)){var t=Number.isInteger(e.data.duration)&&e.data.duration;if(t>720)return void s.logWarning("Duration longer than 12 minutes! Scraping canceled!");this.setFeatureFlag(e),this._currentScraperData=e,this.sendPlayerFeaturedInstanceFound()}},e.prototype.handleDriver_PlayerInstanceFound=function(e){this.handleDetector_PlayerInstanceFound(e)},e.prototype.getAllPlayersContainer=function(){if(t.getIAContainers)return t.getIAContainers();for(var e=document.querySelectorAll(V.getIAContainers()),r=[],n=0;n<e.length;n++){var i=e[n];i.offsetParent&&r.push(i)}return r},e.prototype._setPlayersPlaceholderList=function(){for(var e=this.getAllPlayersContainer(),t=0;t<e.length;t++){var r=e[t];this._placeholderFoundList.indexOf(r)>-1||this._placeholderFoundList.push(r)}},e.prototype.setTopMostContainer=function(){if(this._setPlayersPlaceholderList(),0==this._placeholderFoundList.length)return void s.logWarning("No places were set to the picker to choose from");this._topMostPlaceholder=this._placeholderFoundList[0];for(var e=1;e<this._placeholderFoundList.length;e++){var t=this._placeholderFoundList[e];t.offsetTop<this._topMostPlaceholder.offsetTop&&(this._topMostPlaceholder=t)}},e.prototype.sendPlayerFeaturedInstanceFound=function(){return this.isScrapDataValid(this._currentScraperData)?(this.sendScrapEvent(),this._onPlayerFeaturedInstanceFound.dispatch(this._currentScraperData),void(this._currentScraperData=null)):void(this._currentScraperData=null)},e.prototype.shouldAutopushEvent=function(e){for(var t=V.getAutopushCriteria(),r=0;r<t.length;r++){var n=t[r],i=!0;if(n&&n.hoursAgo){var o=n.hoursAgo,a=36e5*o,l=new Date;l.setTime(l.getTime()-a),i=e.published_at>l}var c=!0,u=[];Array.isArray(n.tags)&&(u=n.tags);for(var d=0;d<u.length;d++){var p=u[d];if(e.tags.indexOf(p)==-1){c=!1;break}}var g=!0,h=n.urls;if(h&&(g=s.isUrlMatchPattern(e.raw_url,n.urls)),i&&c&&g)return!0}return!1},e.prototype.sendScrapEvent=function(){var e=this._currentScraperData.data,t=M.getInArticleArticleData(e.video_id,e.url);if(e.exist=!!t,a.scrap.metaDataEnhancer){var r=new a.scrap.metaDataEnhancer,n=r.getPayloadMetaData(this._currentScraperData);e=s.extentObject(n,e)}else if(a.scrap.baseMetaDataEnhancer){var r=new a.scrap.baseMetaDataEnhancer,n=r.getPayloadMetaData(this._currentScraperData);e=s.extentObject(n,e)}var i=localStorage&&!!localStorage.getItem("_minForcePush");e.exist||!i&&!V.getScraperType2()||R.send(o.Emitter.NEW_VIDEO_EVENT,e),R.send(o.Emitter.NEW_SCRAPE_EVENT,e)},a.scrap.picker.Base=e}(),function(){a.scrap.startUrlTracker=function(e){}}(),function(){function e(){e.__superCtor__.call(this)}s["extends"](e,a.scrap.detector.Base),e.getName=function(){return a.scrap.PlayersNameEnum.Calcalist},e.prototype.getType=function(){return a.scrap.PlayerEnum.DEFAULT},e.prototype._detectNewPlayers=function(){if(e.__super__._detectNewPlayers.call(this),!window||!window.dataLayer)return void console.error("window.dataLayer is not defined");var t=window.dataLayer.filter(function(e){return e&&e.dcPath}),r=_slicedToArray(t,1),n=r[0];if(!n)return void console.error("No data found with a dcPath");var i=n.dcPath;if(!i)return void console.error("Project number could not be determined");var o=["3847","30862","24188"],a=!o.some(function(e){return i.includes(e)}),l=document.querySelectorAll(".articleContainer .fp-engine");return a&&l?(this._collectScraperDataList(l),void this._setStateIdle()):void s.log("Scrape Canceled: Video not approved by publisher for TVP content")},e.prototype._collectScraperDataList=function(e){for(var t=0;t<e.length;t++){var r=e[t],n=this._collectScraperData(r);if(!n.data.duration)return null;if(this._hasPlayerInstanceFound(n.videoId))return;this._sendPlayerInstanceFound(n),this._addPlayerInstanceFound(n.videoId)}},e.prototype._getVideoId=function(e){var t=window.articleId,r=this._getPlayerUrlRaw(e).split("/").pop();if(t===r)return t},e.prototype._getVideoStream=function(e){var e=window.flowplayer,t=e&&e.instances.filter(function(e){return e.hasOwnProperty("hls")}),r=t.length>0&&t[0].hls.url;return r},e.prototype.getScraperPlayerId=function(){return a.scrap.PlayerEnum.DEFAULT},e.prototype._getPlayerPlaceholder=function(e){return e},e.prototype._getVideoDuration=function(e,t){if(e.duration)return e.duration},e.prototype._getVideoTitle=function(e,t){return document.title.replace(/()/,"").trim()},a.scrap.detector.Calcalist=e,a.scrap.factory.addDetector(e)}(),function(){function e(){e.__superCtor__.call(this)}s["extends"](e,a.scrap.picker.Base),e.getName=function(){return a.scrap.PlayerEnum.YouTube},e.prototype.handleDetector_PlayerInstanceFound=function(e){var t=e.data.duration;if(t<60)return void s.logError("Scraping canceled! The video is under 1 minute!");if(this.isScrapDataValid(e)){if(e.data.stream.includes("live.m3u8"))return void s.logError("Scraping canceled! Live stream!");this.setFeatureFlag(e),e.data.featured&&(this._currentScraperData=e,this.sendPlayerFeaturedInstanceFound())}},a.scrap.picker.Ynet=e,a.scrap.factory.addPicker(e)}(),function(){function e(){}e.prototype.getPayloadMetaData=function(e){var t={},r=this.getPublishedAt(e);return r&&!isNaN(r)&&(t.published_at=r,10===(""+t.published_at).length&&(t.published_at=1e3*t.published_at)),t.tags=this.getPageTags(e),t.video_metadata=this.getVideoMeta(e),t},e.prototype.getPageTags=function(e){if(this.getTagsAtByConfig())return this.getTagsAtByConfig();var t=this.getTags(e);return"string"!=typeof t&&(t=JSON.stringify(t)),t},e.prototype.getPublishedAtByConfig=function(){var e=V.getPublishedAtConfig().keyword,t=V.getPublishedAtConfig().selector;return e&&this.publishedAtFromKeyword(e)?this.publishedAtFromKeyword(e):t&&this.publishedAtFromDom(t)?this.publishedAtFromDom(t):void 0},e.prototype.getTagsAtByConfig=function(){var e=V.getTagsConfig().selector;if(e){for(var t=[],r=document.querySelectorAll(e),n=0;n<r.length;n++)t.push(r[n].textContent.trim());return t.join(",")}},e.prototype.getPublishedAt=function(e){if(this.getPublishedAtByConfig())return this.getPublishedAtByConfig();var t=document.querySelector("meta[itemprop='uploadDate']")||document.querySelector("meta[name='date']")||document.querySelector("meta[name='datePublished']")||document.querySelector("meta[itemprop='datePublished']")||document.querySelector("*[property='v:published']")||document.querySelector("*[property='v:published']")||document.querySelector("*[property*='video:published']")||document.querySelector("*[property*='og:updated_time']")||document.querySelector("time[itemprop='datePublished']")||document.querySelector("meta[property*='published_time']")||document.querySelector("time");if(t&&t.getAttribute("content")){var r=t.getAttribute("content"),n="Invalid Date"!=new Date(r).toDateString();return n?new Date(r).getTime():new Date(t.getAttribute("content").replace(/-/g,"/")).getTime()}return t&&t.dateTime?new Date(t.dateTime).getTime():null},e.prototype.getTags=function(e){var t=document.querySelector("meta[name='keywords'],meta[property='keywords'],meta[name='news_keywords']");return t?t.content:""},e.prototype.publishedAtFromKeyword=function(e){var t=this.searchKeyInJSONScripts(e);if(t){var r=new Date(t[e]);if("Invalid Date"!==r.toString())return new Date(t[e]).getTime()}},e.prototype.publishedAtFromDom=function(e){var t=document.querySelector(e);if(t){var r=t.innerText.replace(/-/g,"/").replace(/T/g," ").replace(/Z/g,""),n=new Date(r);if("Invalid Date"!==n.toString())return n.getTime()}},e.prototype.searchKeyInJSONScripts=function(e){for(var t=document.querySelectorAll("script[type*='application']"),r=0;r<t.length;r++){var n=t[r].textContent;if(n.indexOf(e)===-1)return;var i=JSON.parse(t[r].textContent);if(!i)return;if(!Array.isArray(i))return i;for(var o=0;o<i.length;o++)if(i[o][e])return i[o]}},e.prototype.getVideoMeta=function(e){return null},a.scrap.baseMetaDataEnhancer=e}(),s.debugParamsOverrides();var b=new E;if(b.getCurrentStorage()){var C=new n;C.init();var O=(new E(localStorage),new P),L=O.create(e.compatibility),N=new y(b),R=new t(s,b,o.Urls),F=new A(s,window,e.debugParams[h.FORCE_TEST],b),U=new D(s,F,L,b,g,N),V=new S(e,s),M=new I(s,V,L);new w(s,L,V);N.init(e.sessionData);var k=function(){function t(){s.log(e.debugParams),r(),i()}function r(){if(e.debug===!0)n(),s.consoleNative.log("Welcome to Minute "+e.ver+" "+e.debugParams[f.SCRIPT_HOSTNAME]);else{var t=e.config.config.general&&e.config.config.general.welcomeToMinuteSize;switch(t){case o.WELCOME_TO_MINUTE_SIZE.OFF:break;case o.WELCOME_TO_MINUTE_SIZE.SMALL:s.consoleNative.log("Welcome to Minute "+e.ver+" ");break;default:n(),s.consoleNative.log("Welcome to Minute "+e.ver+" "+e.debugParams[f.SCRIPT_HOSTNAME])}}}function n(){var e="font-size: 60px; color:#28c0d5; margin-left: 20px;text-shadow: 2px 2px #fbb907;";s.consoleNative.log("%cMinute.ly",e);var t="Dynamic viewing experience created by Minute.ly. \nWe unlock your video's full potential.\nLearn more at http://minute.ly?utm_source=insp_elem \n\n\n";s.consoleNative.log(t)}function i(){y=e.config,_min.config=null,L.init(y.config),V.init(y,L,l,e.debugParams[h.ENABLE_BLOCKING_DISTANCE]),F.init(V.getTestGroupSize(),!1),a.utils.logger.setTestGroup(F.isTestGroup()),c(),u(),R.flushAll()}function c(){return T.sendUrlReport(),L.isBrowserSupported()?L.isLPM()?void s.log("Minute will shut down now due to LPM "+e.ver+" "+e.debugParams[f.SCRIPT_HOSTNAME]):L.isDataSaverOn()?void s.log("Minute will shut down now due to Data saver  "+e.ver+" "+e.debugParams[f.SCRIPT_HOSTNAME]):void U.start():void s.log("Minute is not supported "+e.ver+" "+e.debugParams[f.SCRIPT_HOSTNAME])}function u(){v=performance.now(),V.shouldWaitForLoadEvent()?(window.addEventListener("load",function(){setTimeout(function(){p()},0)}),window.performance&&window.performance.timing&&window.performance.timing.loadEventEnd>0&&p()):p()}function p(){if(!E){_=performance.now();var e=_-v;if(E=!0,g(),d.dispatchEvent(o.Events.SYSTEM_RUNNING),V.shouldWaitForLoadEvent()&&e>.2){s.log("core delayed: "+e);var t={url:encodeURIComponent(s.urls.getLocationUrl()),user_agent:navigator.userAgent,source:L.getAnalyticsSource(),publisher:V.getPublisherIdNumber(),category:"CoreDelayed",action:"Delayed",label:"seconds",value:Math.round(e)};R.send(o.Emitter.CUSTOM_EVENTS,t)}}}function g(){m||(m=new a.scrap.ScraperService,s.log("Detector created"))}var v,m=null,y=null,E=!1,_=0;setTimeout(t,0)};new k;return e}}(window._minDebug||_min||{});